exports.id=2765,exports.ids=[2765],exports.modules={3968:(e,s,i)=>{Promise.resolve().then(i.bind(i,4218))},4218:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>x});var r=i(3393),t=i(3884),a=i(7928),n=i(8661),l=i(5033),o=i.n(l),d=i(7838);function u(){let{roles:e,hasPermission:s}=(0,d.c_)(),[i,t]=(0,n.useState)(!1);return(0,r.jsxs)("div",{className:"w-64 bg-indigo-900 text-white shadow-lg overflow-y-auto",children:[(0,r.jsxs)("div",{className:"p-6",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Eye Hospital"}),r.jsx("p",{className:"text-indigo-200 text-sm",children:"Management System"})]}),(0,r.jsxs)("nav",{className:"mt-8 space-y-2",children:[[{label:"Dashboard",href:"/dashboard",icon:"\uD83D\uDCCA",requiredPermission:null},{label:"Patients",href:"/dashboard/patients",icon:"\uD83D\uDC65",requiredPermission:"patient.view"},{label:"Appointments",href:"/dashboard/appointments",icon:"\uD83D\uDCC5",requiredPermission:"appointment.view"},{label:"Examinations",href:"/dashboard/examinations",icon:"�",requiredPermission:"clinical_examination.view"}].map(e=>{let i=!e.requiredPermission||s(e.requiredPermission);return i?(0,r.jsxs)(o(),{href:e.href,className:"flex items-center px-6 py-3 text-indigo-100 hover:bg-indigo-800 transition",children:[r.jsx("span",{className:"mr-3",children:e.icon}),e.label]},e.href):null}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("button",{onClick:()=>t(!i),className:"flex items-center justify-between w-full px-6 py-3 text-indigo-100 hover:bg-indigo-800 transition",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("span",{className:"mr-3",children:"\uD83D\uDD27"}),r.jsx("span",{children:"Admin Management"})]}),r.jsx("span",{className:"text-xs",children:i?"▼":"▶"})]}),i&&r.jsx("div",{className:"bg-indigo-950 bg-opacity-50",children:[{label:"Overview",href:"/dashboard/admin/overview",icon:"\uD83D\uDCCB",requiredPermission:"admin.dashboard.view"},{label:"Users",href:"/dashboard/admin/users",icon:"\uD83D\uDC65",requiredPermission:"user.view"},{label:"Roles",href:"/dashboard/admin/roles",icon:"\uD83D\uDD10",requiredPermission:"role.view"},{label:"Permissions",href:"/dashboard/admin/permissions",icon:"\uD83D\uDEE1️",requiredPermission:"permission.view"},{label:"Tenants",href:"/dashboard/admin/tenants",icon:"\uD83C\uDFDB️",requiredPermission:"tenant.view"},{label:"Organizations",href:"/dashboard/admin/organizations",icon:"\uD83C\uDFD7️",requiredPermission:"organization.view"},{label:"Branches",href:"/dashboard/admin/branches",icon:"\uD83C\uDFE2",requiredPermission:"branch.view"},{label:"Departments",href:"/dashboard/admin/departments",icon:"\uD83C\uDFE5",requiredPermission:"department.view"},{label:"Audit Logs",href:"/dashboard/admin/audit-logs",icon:"\uD83D\uDCDD",requiredPermission:"audit.view"},{label:"Devices",href:"/dashboard/admin/devices",icon:"\uD83D\uDCF1",requiredPermission:"device.view"},{label:"Sessions",href:"/dashboard/admin/sessions",icon:"\uD83D\uDD11",requiredPermission:"session.view"},{label:"Emergency Access",href:"/dashboard/admin/emergency-access",icon:"\uD83D\uDEA8",requiredPermission:"emergency_access.view"},{label:"Settings",href:"/dashboard/admin/settings",icon:"⚙️",requiredPermission:"system_settings.view"}].map(e=>{let i=!e.requiredPermission||s(e.requiredPermission);return i?(0,r.jsxs)(o(),{href:e.href,className:"flex items-center pl-12 pr-6 py-2 text-indigo-200 text-sm hover:bg-indigo-800 transition",children:[r.jsx("span",{className:"mr-3",children:e.icon}),e.label]},e.href):null})})]})]})]})}function c(){let{user:e,logout:s}=(0,t.t)();return(0,r.jsxs)("div",{className:"bg-white border-b p-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{className:"text-gray-600",children:"☰"}),r.jsx("h2",{className:"text-lg font-semibold",children:"Dashboard"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[e&&(0,r.jsxs)("div",{className:"text-sm text-gray-700",children:[e.firstName," ",e.lastName]}),r.jsx("button",{onClick:()=>s(),className:"text-sm text-gray-600 hover:text-gray-800",children:"Logout"})]})]})}var h=i(6226),m=i(722);function x({children:e}){let s=(0,a.useRouter)(),{token:i,user:l}=(0,t.t)(),[o,d]=(0,n.useState)(!1),[x,f]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{d(!0),(0,t.R)(),(0,m.qN)(),setTimeout(()=>f(!0),100)},[]),(0,n.useEffect)(()=>{x&&!i&&s.push("/auth/login")},[x,i,s]),o&&x&&i)?r.jsx(h.i,{children:(0,r.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[r.jsx(u,{}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsx(c,{}),r.jsx("main",{className:"flex-1 overflow-auto",children:r.jsx("div",{className:"p-6",children:e})})]})]})}):r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})})}},6226:(e,s,i)=>{"use strict";i.d(s,{i:()=>l});var r=i(3393),t=i(7838),a=i(7928),n=i(8661);function l({children:e,requiredPermission:s,requiredRole:i,fallbackPath:l="/dashboard/unauthorized"}){let o=(0,a.useRouter)(),{token:d,hasPermission:u,hasRole:c}=(0,t.c_)(),[h,m]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{setTimeout(()=>m(!0),50)},[]),(0,n.useEffect)(()=>{if(h){if(!d){o.push("/auth/login");return}if(s&&!u(s)||i&&!c(i)){o.push(l);return}}},[h,d,s,i,o,u,c]),h&&d)?r.jsx(r.Fragment,{children:e}):r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})})}},7838:(e,s,i)=>{"use strict";i.d(s,{c_:()=>a});var r=i(3884);let t=new class{constructor(){this.cache=new Map,this.defaultTTL=3e5,this.storageKey="permission_cache",this.loadFromStorage(),this.startCleanupInterval()}get(e){let s=this.cache.get(e);return s?Date.now()>s.timestamp+s.ttl?(this.cache.delete(e),this.saveToStorage(),null):s:null}set(e,s,i,r={}){let t={permissions:[...s],roles:[...i],timestamp:Date.now(),ttl:r.ttl||this.defaultTTL};this.cache.set(e,t),this.saveToStorage()}invalidate(e){this.cache.delete(e),this.saveToStorage()}clear(){this.cache.clear(),this.saveToStorage()}hasPermission(e,s){let i=this.get(e);return i?!!i.permissions.includes("*")||i.permissions.includes(s):null}hasRole(e,s){let i=this.get(e);return i?i.roles.includes(s):null}getPermissions(e){let s=this.get(e);return s?[...s.permissions]:null}getRoles(e){let s=this.get(e);return s?[...s.roles]:null}saveToStorage(){}loadFromStorage(){}startCleanupInterval(){}};function a(){let e=(0,r.t)();return{...e,hasPermission:s=>{let i=e.user;if(!i)return!1;let r=t.hasPermission(i.id,s);return null!==r?r:e.hasPermission(s)},hasRole:s=>{let i=e.user;if(!i)return!1;let r=t.hasRole(i.id,s);return null!==r?r:e.hasRole(s)},getPermissions:()=>{let s=e.user;if(!s)return[];let i=t.getPermissions(s.id);return null!==i?i:e.permissions||[]},getRoles:()=>{let s=e.user;if(!s)return[];let i=t.getRoles(s.id);return null!==i?i:e.roles||[]},setAuth:(s,i,r,a,n,l,o)=>{e.setAuth(s,i,r,a,n,l,o),t.set(r.id,n,a)},logout:()=>{let s=e.user;s&&t.invalidate(s.id),e.logout()}}}},6687:(e,s,i)=>{"use strict";i.r(s),i.d(s,{$$typeof:()=>n,__esModule:()=>a,default:()=>o});var r=i(8390);let t=(0,r.createProxy)(String.raw`C:\Users\Sam Aluri\Downloads\Hospital Portal\apps\hospital-portal-web\src\app\dashboard\layout.tsx`),{__esModule:a,$$typeof:n}=t,l=t.default,o=l}};