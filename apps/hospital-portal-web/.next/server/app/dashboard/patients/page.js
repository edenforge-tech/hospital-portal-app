(()=>{var e={};e.id=3668,e.ids=[3668],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},612:e=>{"use strict";e.exports=require("node:os")},5830:e=>{"use strict";e.exports=require("node:process")},5997:e=>{"use strict";e.exports=require("node:tty")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},3542:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>g,originalPathname:()=>x,pages:()=>m,routeModule:()=>u,tree:()=>o});var a=t(9173),r=t(8318),i=t(3526),n=t.n(i),l=t(8996),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);t.d(s,d);let c=a.AppPageRouteModule,o=["",{children:["dashboard",{children:["patients",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,905)),"C:\\Users\\Sam Aluri\\Downloads\\Hospital Portal\\apps\\hospital-portal-web\\src\\app\\dashboard\\patients\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,6687)),"C:\\Users\\Sam Aluri\\Downloads\\Hospital Portal\\apps\\hospital-portal-web\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,6840)),"C:\\Users\\Sam Aluri\\Downloads\\Hospital Portal\\apps\\hospital-portal-web\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,1403,23)),"next/dist/client/components/not-found-error"]}],m=["C:\\Users\\Sam Aluri\\Downloads\\Hospital Portal\\apps\\hospital-portal-web\\src\\app\\dashboard\\patients\\page.tsx"],x="/dashboard/patients/page",g={require:t,loadChunk:()=>Promise.resolve()},u=new c({definition:{kind:r.x.APP_PAGE,page:"/dashboard/patients/page",pathname:"/dashboard/patients",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},8392:(e,s,t)=>{Promise.resolve().then(t.bind(t,3343))},3343:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>A});var a=t(3393),r=t(8661),i=t(722),n=t(6226),l=t(7838);function d({permission:e,role:s,fallback:t=null,requireAll:r=!1,children:i}){let{hasPermission:n,hasRole:d}=(0,l.c_)();if(s&&!d(s))return a.jsx(a.Fragment,{children:t});if(e){let s=e.split(",").map(e=>e.trim());if(r){let e=s.every(e=>n(e));if(!e)return a.jsx(a.Fragment,{children:t})}else{let e=s.some(e=>n(e));if(!e)return a.jsx(a.Fragment,{children:t})}}return a.jsx(a.Fragment,{children:i})}var c=t(9285),o=t(683),m=t(7250),x=t(9044),g=t(7630);let u=["A+","A-","B+","B-","AB+","AB-","O+","O-"],p=["Male","Female","Other","Prefer not to say"];function h({patient:e,isOpen:s,onClose:t,onSave:n}){let[l,d]=(0,r.useState)(!1),[h,b]=(0,r.useState)(""),[N,y]=(0,r.useState)({firstName:"",lastName:"",dateOfBirth:"",gender:"",contactNumber:"",email:"",address:"",bloodGroup:"",emergencyContactName:"",emergencyContactNumber:"",allergies:"",medicalConditions:"",medications:"",insuranceProvider:"",insuranceNumber:"",notes:""});(0,r.useEffect)(()=>{e?y({id:e.id,medicalRecordNumber:e.medicalRecordNumber,firstName:e.firstName||"",lastName:e.lastName||"",dateOfBirth:e.dateOfBirth||"",gender:e.gender||"",contactNumber:e.contactNumber||"",email:e.email||"",address:e.address||"",bloodGroup:e.bloodGroup||"",emergencyContactName:e.emergencyContactName||"",emergencyContactNumber:e.emergencyContactNumber||"",allergies:e.allergies||"",medicalConditions:e.medicalConditions||"",medications:e.medications||"",insuranceProvider:e.insuranceProvider||"",insuranceNumber:e.insuranceNumber||"",notes:e.notes||""}):y({firstName:"",lastName:"",dateOfBirth:"",gender:"",contactNumber:"",email:"",address:"",bloodGroup:"",emergencyContactName:"",emergencyContactNumber:"",allergies:"",medicalConditions:"",medications:"",insuranceProvider:"",insuranceNumber:"",notes:""})},[e,s]);let j=async s=>{if(s.preventDefault(),!N.firstName.trim()||!N.lastName.trim()){b("First name and last name are required");return}if(!N.dateOfBirth){b("Date of birth is required");return}if(!N.gender){b("Gender is required");return}let a=new Date(N.dateOfBirth),r=new Date;if(a>r){b("Date of birth cannot be in the future");return}d(!0),b("");try{e?.id?await i.Di.update(e.id,N):await i.Di.create(N),n(),t()}catch(e){b(e.response?.data?.message||"Failed to save patient")}finally{d(!1)}},f=(e,s)=>{y(t=>({...t,[e]:s}))};return s?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b sticky top-0 bg-white",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e?"Edit Patient":"Add New Patient"}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:a.jsx(c.Z,{size:24})})]}),(0,a.jsxs)("form",{onSubmit:j,className:"p-6 space-y-6",children:[h&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg",children:h}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[a.jsx(o.Z,{className:"w-5 h-5 mr-2"}),"Basic Information"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),a.jsx("input",{type:"text",value:N.firstName,onChange:e=>f("firstName",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),a.jsx("input",{type:"text",value:N.lastName,onChange:e=>f("lastName",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth *"}),a.jsx("input",{type:"date",value:N.dateOfBirth,onChange:e=>f("dateOfBirth",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0,max:new Date().toISOString().split("T")[0]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender *"}),(0,a.jsxs)("select",{value:N.gender,onChange:e=>f("gender",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"",children:"Select Gender"}),p.map(e=>a.jsx("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blood Group"}),(0,a.jsxs)("select",{value:N.bloodGroup,onChange:e=>f("bloodGroup",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select Blood Group"}),u.map(e=>a.jsx("option",{value:e,children:e},e))]})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[a.jsx(m.Z,{className:"w-5 h-5 mr-2"}),"Contact Information"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),a.jsx("input",{type:"tel",value:N.contactNumber,onChange:e=>f("contactNumber",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"+1 (555) 123-4567"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),a.jsx("input",{type:"email",value:N.email,onChange:e=>f("email",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"patient@example.com"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),a.jsx("textarea",{value:N.address,onChange:e=>f("address",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",rows:3,placeholder:"Street address, city, state, zip code"})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[a.jsx(m.Z,{className:"w-5 h-5 mr-2"}),"Emergency Contact"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Emergency Contact Name"}),a.jsx("input",{type:"text",value:N.emergencyContactName,onChange:e=>f("emergencyContactName",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Full name of emergency contact"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Emergency Contact Phone"}),a.jsx("input",{type:"tel",value:N.emergencyContactNumber,onChange:e=>f("emergencyContactNumber",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"+1 (555) 123-4567"})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[a.jsx(x.Z,{className:"w-5 h-5 mr-2"}),"Medical Information"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Known Allergies"}),a.jsx("textarea",{value:N.allergies,onChange:e=>f("allergies",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",rows:2,placeholder:"List any known allergies (e.g., penicillin, nuts, latex)"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medical Conditions"}),a.jsx("textarea",{value:N.medicalConditions,onChange:e=>f("medicalConditions",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",rows:2,placeholder:"List any chronic conditions (e.g., diabetes, hypertension, asthma)"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Medications"}),a.jsx("textarea",{value:N.medications,onChange:e=>f("medications",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",rows:2,placeholder:"List current medications with dosages"})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[a.jsx(g.Z,{className:"w-5 h-5 mr-2"}),"Insurance Information"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Insurance Provider"}),a.jsx("input",{type:"text",value:N.insuranceProvider,onChange:e=>f("insuranceProvider",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Insurance company name"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Insurance Number"}),a.jsx("input",{type:"text",value:N.insuranceNumber,onChange:e=>f("insuranceNumber",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Policy or member ID number"})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Notes"}),a.jsx("textarea",{value:N.notes,onChange:e=>f("notes",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",rows:3,placeholder:"Any additional notes or special instructions"})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",disabled:l,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:l,children:l?"Saving...":e?"Update Patient":"Create Patient"})]})]})]})}):null}var b=t(332),N=t(6895),y=t(7955),j=t(5780),f=t(4714),v=t(7337);function w({patientId:e,isOpen:s,onClose:t,onEdit:n}){let[l,d]=(0,r.useState)(null),[u,p]=(0,r.useState)([]),[h,w]=(0,r.useState)(!1),[C,P]=(0,r.useState)("details");(0,r.useEffect)(()=>{s&&e&&k()},[s,e]);let k=async()=>{w(!0);try{let[s,t]=await Promise.all([i.Di.getById(e),i.h5.getByPatient(e)]);d(s.data),p(t.data||[])}catch(e){console.error("Error loading patient data:",e)}finally{w(!1)}},D=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return s?h||!l?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"}),a.jsx("span",{className:"ml-2 text-gray-600",children:"Loading patient details..."})]})})}):a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center",children:a.jsx(o.Z,{className:"w-8 h-8 text-indigo-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-gray-900",children:[l.firstName," ",l.lastName]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,a.jsxs)("span",{children:["MRN: ",l.medicalRecordNumber]}),(0,a.jsxs)("span",{children:["Age: ",(e=>{let s=new Date,t=new Date(e),a=s.getFullYear()-t.getFullYear(),r=s.getMonth()-t.getMonth();return(r<0||0===r&&s.getDate()<t.getDate())&&a--,a})(l.dateOfBirth)," years"]}),a.jsx("span",{className:"capitalize",children:l.gender})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:n,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Edit Patient"}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:a.jsx(c.Z,{size:24})})]})]}),a.jsx("div",{className:"border-b bg-gray-50",children:a.jsx("div",{className:"px-6",children:a.jsx("nav",{className:"flex space-x-8",children:[{id:"details",label:"Patient Details",icon:o.Z},{id:"history",label:"Medical History",icon:b.Z},{id:"examinations",label:"Examinations",icon:N.Z}].map(e=>(0,a.jsxs)("button",{onClick:()=>P(e.id),className:`flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm ${C===e.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(e.icon,{className:"w-4 h-4"}),e.label]},e.id))})})}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:["details"===C&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx(y.Z,{className:"w-5 h-5 text-gray-400"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date of Birth"}),a.jsx("p",{className:"font-medium",children:D(l.dateOfBirth)})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx(x.Z,{className:"w-5 h-5 text-gray-400"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Blood Group"}),a.jsx("p",{className:"font-medium",children:l.bloodGroup||"Not specified"})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Contact Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.contactNumber&&(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx(m.Z,{className:"w-5 h-5 text-gray-400"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),a.jsx("p",{className:"font-medium",children:l.contactNumber})]})]}),l.email&&(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx(j.Z,{className:"w-5 h-5 text-gray-400"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),a.jsx("p",{className:"font-medium",children:l.email})]})]}),l.address&&(0,a.jsxs)("div",{className:"md:col-span-2 flex items-start gap-3",children:[a.jsx(g.Z,{className:"w-5 h-5 text-gray-400 mt-1"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Address"}),a.jsx("p",{className:"font-medium",children:l.address})]})]})]})]}),(l.emergencyContactName||l.emergencyContactNumber)&&(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Emergency Contact"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.emergencyContactName&&(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Name"}),a.jsx("p",{className:"font-medium",children:l.emergencyContactName})]}),l.emergencyContactNumber&&(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx(m.Z,{className:"w-5 h-5 text-gray-400"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),a.jsx("p",{className:"font-medium",children:l.emergencyContactNumber})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Medical Information"}),(0,a.jsxs)("div",{className:"space-y-4",children:[l.allergies&&(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx(f.Z,{className:"w-5 h-5 text-red-400 mt-1"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Allergies"}),a.jsx("p",{className:"font-medium text-red-700",children:l.allergies})]})]}),l.medicalConditions&&(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx(b.Z,{className:"w-5 h-5 text-gray-400 mt-1"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Medical Conditions"}),a.jsx("p",{className:"font-medium",children:l.medicalConditions})]})]}),l.medications&&(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx(v.Z,{className:"w-5 h-5 text-gray-400 mt-1"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Current Medications"}),a.jsx("p",{className:"font-medium",children:l.medications})]})]})]})]}),(l.insuranceProvider||l.insuranceNumber)&&(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Insurance Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.insuranceProvider&&(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Provider"}),a.jsx("p",{className:"font-medium",children:l.insuranceProvider})]}),l.insuranceNumber&&(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Policy Number"}),a.jsx("p",{className:"font-medium",children:l.insuranceNumber})]})]})]}),l.notes&&(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Notes"}),a.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:l.notes})]})]}),"history"===C&&(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Medical History"}),(0,a.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg text-center",children:[a.jsx(N.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Medical history feature coming soon"}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"This will include past diagnoses, treatments, and medical records"})]})]}),"examinations"===C&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Examination History"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[u.length," examinations"]})]}),0===u.length?(0,a.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg text-center",children:[a.jsx(N.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No examinations found"}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Examination records will appear here once created"})]}):a.jsx("div",{className:"space-y-4",children:u.map(e=>(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:e.examinationType}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[D(e.examinationDate)," â€¢ Dr. ",e.doctorName]})]}),a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${"completed"===e.status?"bg-green-100 text-green-800":"in-progress"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:e.status})]}),e.diagnosis&&(0,a.jsxs)("div",{className:"mb-2",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Diagnosis:"}),a.jsx("p",{className:"text-sm text-gray-600",children:e.diagnosis})]}),e.symptoms&&(0,a.jsxs)("div",{className:"mb-2",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Symptoms:"}),a.jsx("p",{className:"text-sm text-gray-600",children:e.symptoms})]}),e.treatment&&(0,a.jsxs)("div",{className:"mb-2",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Treatment:"}),a.jsx("p",{className:"text-sm text-gray-600",children:e.treatment})]}),e.notes&&(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Notes:"}),a.jsx("p",{className:"text-sm text-gray-600",children:e.notes})]})]},e.id))})]})]})]})}):null}var C=t(1660),P=t(7222),k=t(2071),D=t(3662),S=t(2268),q=t(1967);function A(){let[e,s]=(0,r.useState)([]),[t,l]=(0,r.useState)(!0),[c,o]=(0,r.useState)(""),[m,x]=(0,r.useState)(!1),[g,u]=(0,r.useState)(!1),[p,b]=(0,r.useState)(null),[N,y]=(0,r.useState)(""),[j,f]=(0,r.useState)("");(0,r.useEffect)(()=>{v()},[]);let v=async()=>{try{l(!0);let e=await i.Di.getAll();s(e.data)}catch(e){console.error("Failed to fetch patients:",e),y("Failed to load patients")}finally{l(!1)}},A=()=>{b(null),x(!0)},Z=e=>{b(e),x(!0)},B=e=>{b(e),u(!0)},M=async e=>{if(confirm("Are you sure you want to delete this patient? This action cannot be undone."))try{await i.Di.delete(e),f("Patient deleted successfully"),v(),setTimeout(()=>f(""),3e3)}catch(e){console.error("Failed to delete patient:",e),y("Failed to delete patient")}},E=e.filter(e=>`${e.firstName} ${e.lastName}`.toLowerCase().includes(c.toLowerCase())||e.medicalRecordNumber.toLowerCase().includes(c.toLowerCase())||e.email?.toLowerCase().includes(c.toLowerCase())||e.contactNumber?.includes(c));return a.jsx(n.i,{requiredPermission:"patient.view",children:a.jsx("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Patient Management"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage patient records and information"})]}),a.jsx(d,{permission:"patient.create",children:(0,a.jsxs)("button",{onClick:A,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:[a.jsx(C.Z,{size:20}),"Add New Patient"]})})]}),j&&a.jsx("div",{className:"mb-4 bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg",children:j}),N&&(0,a.jsxs)("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg",children:[N,a.jsx("button",{onClick:()=>y(""),className:"float-right font-bold",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"mb-6 flex gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[a.jsx(P.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Search patients by name, MRN, email, or phone...",value:c,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,a.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[a.jsx(k.Z,{size:20}),"Filters"]})]}),t?(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"}),a.jsx("p",{className:"ml-4 text-gray-600",children:"Loading patients..."})]}):0===E.length?(0,a.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:[a.jsx("div",{className:"text-6xl mb-4",children:"\uD83D\uDC65"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:c?"No patients found":"No patients yet"}),a.jsx("p",{className:"text-gray-600 mb-4",children:c?"Try adjusting your search criteria":"Get started by adding your first patient"}),!c&&a.jsx(d,{permission:"patient.create",children:a.jsx("button",{onClick:A,className:"bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700",children:"Add New Patient"})})]}):(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"MRN"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Patient Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Age / Gender"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Blood Group"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:e.medicalRecordNumber})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"font-medium text-gray-900",children:[e.firstName," ",e.lastName]})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-900",children:[function(e){let s=new Date,t=new Date(e),a=s.getFullYear()-t.getFullYear(),r=s.getMonth()-t.getMonth();return(r<0||0===r&&s.getDate()<t.getDate())&&a--,a}(e.dateOfBirth)," years"]}),a.jsx("div",{className:"text-sm text-gray-500 capitalize",children:e.gender})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:e.contactNumber||e.email||"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.bloodGroup||"Not set"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(d,{permission:"patient.view",children:a.jsx("button",{onClick:()=>B(e),className:"text-indigo-600 hover:text-indigo-900 p-1",title:"View Details",children:a.jsx(D.Z,{size:16})})}),a.jsx(d,{permission:"patient.update",children:a.jsx("button",{onClick:()=>Z(e),className:"text-green-600 hover:text-green-900 p-1",title:"Edit Patient",children:a.jsx(S.Z,{size:16})})}),a.jsx(d,{permission:"patient.delete",children:a.jsx("button",{onClick:()=>M(e.id),className:"text-red-600 hover:text-red-900 p-1",title:"Delete Patient",children:a.jsx(q.Z,{size:16})})})]})})]},e.id))})]})}),a.jsx("div",{className:"px-6 py-3 bg-gray-50 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",E.length," of ",e.length," patients"]}),c&&a.jsx("button",{onClick:()=>o(""),className:"text-sm text-indigo-600 hover:text-indigo-800",children:"Clear search"})]})})]}),m&&a.jsx(h,{patient:p||void 0,isOpen:m,onClose:()=>{x(!1),b(null)},onSave:()=>{f("Patient saved successfully"),v(),setTimeout(()=>f(""),3e3)}}),g&&p&&a.jsx(w,{patientId:p.id,isOpen:g,onClose:()=>{u(!1),b(null)},onEdit:()=>{u(!1),x(!0)}})]})})})}},905:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>i,default:()=>d});var a=t(8390);let r=(0,a.createProxy)(String.raw`C:\Users\Sam Aluri\Downloads\Hospital Portal\apps\hospital-portal-web\src\app\dashboard\patients\page.tsx`),{__esModule:i,$$typeof:n}=r,l=r.default,d=l}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[2723,4479,3698,5033,5235,6621,1728,4905,2961,6798,5136,1805,2765],()=>t(3542));module.exports=a})();