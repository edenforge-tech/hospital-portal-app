(()=>{var e={};e.id=2398,e.ids=[2398],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},612:e=>{"use strict";e.exports=require("node:os")},5830:e=>{"use strict";e.exports=require("node:process")},5997:e=>{"use strict";e.exports=require("node:tty")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},9531:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>u,routeModule:()=>p,tree:()=>o});var r=t(9173),a=t(8318),i=t(3526),l=t.n(i),n=t(8996),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let d=r.AppPageRouteModule,o=["",{children:["dashboard",{children:["admin",{children:["devices",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5779)),"C:\\Users\\Sam Aluri\\Downloads\\Hospital Portal\\apps\\hospital-portal-web\\src\\app\\dashboard\\admin\\devices\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,6687)),"C:\\Users\\Sam Aluri\\Downloads\\Hospital Portal\\apps\\hospital-portal-web\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,6840)),"C:\\Users\\Sam Aluri\\Downloads\\Hospital Portal\\apps\\hospital-portal-web\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,1403,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\Users\\Sam Aluri\\Downloads\\Hospital Portal\\apps\\hospital-portal-web\\src\\app\\dashboard\\admin\\devices\\page.tsx"],x="/dashboard/admin/devices/page",m={require:t,loadChunk:()=>Promise.resolve()},p=new d({definition:{kind:a.x.APP_PAGE,page:"/dashboard/admin/devices/page",pathname:"/dashboard/admin/devices",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},4937:(e,s,t)=>{Promise.resolve().then(t.bind(t,2504))},2504:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var r=t(3393),a=t(8661),i=t(3884),l=t(722);let n={getMyDevices:async()=>(0,l.ac)().get("/device-management/my-devices"),getUserDevices:async e=>(0,l.ac)().get(`/device-management/user/${e}/devices`),register:async e=>(0,l.ac)().post("/device-management/register",e),setTrustLevel:async(e,s)=>(0,l.ac)().put(`/device-management/${e}/trust-level`,{trustLevel:s}),setPrimary:async e=>(0,l.ac)().put(`/device-management/${e}/set-primary`,{}),block:async(e,s)=>(0,l.ac)().put(`/device-management/${e}/block`,{reason:s}),unblock:async e=>(0,l.ac)().put(`/device-management/${e}/unblock`,{}),delete:async e=>(0,l.ac)().delete(`/device-management/${e}`)};var c=t(4257),d=t(6585),o=t(8569),u=t(2979),x=t(5171),m=t(8037),p=t(3575),g=t(7630),v=t(9291);function h(){let{user:e}=(0,i.t)(),[s,t]=(0,a.useState)([]),[l,h]=(0,a.useState)(!0),[b,y]=(0,a.useState)(null),[f,j]=(0,a.useState)(null);(0,a.useEffect)(()=>{e&&N()},[e]);let N=async()=>{try{h(!0),y(null);let e=await n.getMyDevices();t(e.data||[])}catch(e){console.error("Error loading devices:",e),y(e.response?.data?.message||"Failed to load devices")}finally{h(!1)}},w=async e=>{try{y(null),j(null),await n.setPrimary(e),j("Primary device updated successfully"),await N()}catch(e){y(e.response?.data?.message||"Failed to set primary device")}},k=async e=>{let s=prompt("Enter reason for blocking this device:");if(s)try{y(null),j(null),await n.block(e,s),j("Device blocked successfully"),await N()}catch(e){y(e.response?.data?.message||"Failed to block device")}},P=async e=>{try{y(null),j(null),await n.unblock(e),j("Device unblocked successfully"),await N()}catch(e){y(e.response?.data?.message||"Failed to unblock device")}},q=async(e,s)=>{try{y(null),j(null),await n.setTrustLevel(e,s),j("Device trust level updated successfully"),await N()}catch(e){y(e.response?.data?.message||"Failed to update trust level")}},D=e=>{switch(e?.toLowerCase()){case"mobile":return r.jsx(c.Z,{className:"text-blue-600",size:24});case"tablet":return r.jsx(d.Z,{className:"text-purple-600",size:24});default:return r.jsx(o.Z,{className:"text-gray-600",size:24})}},_=e=>{switch(e){case"Verified":return r.jsx(u.Z,{className:"text-green-600",size:20});case"Trusted":return r.jsx(x.Z,{className:"text-blue-600",size:20});default:return r.jsx(m.Z,{className:"text-yellow-600",size:20})}},$=e=>{let s={Verified:"bg-green-100 text-green-800",Trusted:"bg-blue-100 text-blue-800",Untrusted:"bg-yellow-100 text-yellow-800"};return s[e]||s.Untrusted};return l?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Devices"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Manage devices that have access to your account"})]}),b&&r.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:b}),f&&r.jsx("div",{className:"mb-4 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded",children:f}),r.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:s.map(e=>(0,r.jsxs)("div",{className:`bg-white rounded-lg shadow-md p-6 border-2 ${e.isPrimaryDevice?"border-indigo-500":"border-gray-200"} ${e.isBlocked?"opacity-60":""}`,children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[D(e.deviceType),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:e.deviceName||`${e.deviceType||"Device"}`}),e.isPrimaryDevice&&r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-indigo-100 text-indigo-800",children:"Primary"})]})]}),r.jsx("div",{className:"flex items-center space-x-1",children:_(e.trustLevel)})]}),r.jsx("div",{className:"mb-3",children:r.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${$(e.trustLevel)}`,children:e.trustLevel})}),(0,r.jsxs)("div",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[e.os&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(p.Z,{size:16}),(0,r.jsxs)("span",{children:[e.os," ",e.osVersion&&`(${e.osVersion})`]})]}),e.location&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(g.Z,{size:16}),r.jsx("span",{children:e.location})]}),e.lastLoginAt&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(v.Z,{size:16}),(0,r.jsxs)("span",{children:["Last login: ",new Date(e.lastLoginAt).toLocaleDateString()]})]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["Total logins: ",e.totalLogins]})]}),e.isBlocked&&(0,r.jsxs)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded text-sm text-red-700",children:[r.jsx("p",{className:"font-semibold",children:"Blocked"}),e.blockReason&&r.jsx("p",{className:"text-xs mt-1",children:e.blockReason})]}),(0,r.jsxs)("div",{className:"flex flex-col space-y-2",children:[!e.isPrimaryDevice&&!e.isBlocked&&r.jsx("button",{onClick:()=>w(e.id),className:"w-full px-3 py-2 text-sm font-medium text-indigo-600 bg-indigo-50 rounded hover:bg-indigo-100",children:"Set as Primary"}),"Verified"!==e.trustLevel&&!e.isBlocked&&r.jsx("button",{onClick:()=>q(e.id,"Verified"),className:"w-full px-3 py-2 text-sm font-medium text-green-600 bg-green-50 rounded hover:bg-green-100",children:"Mark as Verified"}),e.isBlocked?r.jsx("button",{onClick:()=>P(e.id),className:"w-full px-3 py-2 text-sm font-medium text-green-600 bg-green-50 rounded hover:bg-green-100",children:"Unblock Device"}):r.jsx("button",{onClick:()=>k(e.id),className:"w-full px-3 py-2 text-sm font-medium text-red-600 bg-red-50 rounded hover:bg-red-100",children:"Block Device"})]})]},e.id))}),0===s.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx(c.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No devices"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No devices have been registered for your account yet."})]})]})}},5779:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>i,default:()=>c});var r=t(8390);let a=(0,r.createProxy)(String.raw`C:\Users\Sam Aluri\Downloads\Hospital Portal\apps\hospital-portal-web\src\app\dashboard\admin\devices\page.tsx`),{__esModule:i,$$typeof:l}=a,n=a.default,c=n}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[2723,4479,3698,5033,5235,6706,8832,6631,5136,1805,2765],()=>t(9531));module.exports=r})();