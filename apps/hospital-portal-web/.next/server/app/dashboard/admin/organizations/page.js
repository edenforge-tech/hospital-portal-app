(()=>{var e={};e.id=7406,e.ids=[7406],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},612:e=>{"use strict";e.exports=require("node:os")},5830:e=>{"use strict";e.exports=require("node:process")},5997:e=>{"use strict";e.exports=require("node:tty")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},3715:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>g,originalPathname:()=>m,pages:()=>x,routeModule:()=>h,tree:()=>c});var a=s(9173),r=s(8318),i=s(3526),n=s.n(i),l=s(8996),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=a.AppPageRouteModule,c=["",{children:["dashboard",{children:["admin",{children:["organizations",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5884)),"C:\\Users\\Sam Aluri\\Downloads\\Hospital Portal\\apps\\hospital-portal-web\\src\\app\\dashboard\\admin\\organizations\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,6687)),"C:\\Users\\Sam Aluri\\Downloads\\Hospital Portal\\apps\\hospital-portal-web\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,6840)),"C:\\Users\\Sam Aluri\\Downloads\\Hospital Portal\\apps\\hospital-portal-web\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,1403,23)),"next/dist/client/components/not-found-error"]}],x=["C:\\Users\\Sam Aluri\\Downloads\\Hospital Portal\\apps\\hospital-portal-web\\src\\app\\dashboard\\admin\\organizations\\page.tsx"],m="/dashboard/admin/organizations/page",g={require:s,loadChunk:()=>Promise.resolve()},h=new d({definition:{kind:r.x.APP_PAGE,page:"/dashboard/admin/organizations/page",pathname:"/dashboard/admin/organizations",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6548:(e,t,s)=>{Promise.resolve().then(s.bind(s,8986))},8986:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>P});var a=s(3393),r=s(8661),i=s(3884),n=s(722);let l={getAllOrganizations:async e=>{let t=new URLSearchParams;e?.tenantId&&t.append("tenantId",e.tenantId),e?.search&&t.append("search",e.search),e?.type&&t.append("type",e.type),e?.status&&t.append("status",e.status),e?.parentOrganizationId&&t.append("parentOrganizationId",e.parentOrganizationId),e?.rootOrganizationsOnly!==void 0&&t.append("rootOrganizationsOnly",String(e.rootOrganizationsOnly)),e?.pageNumber&&t.append("pageNumber",String(e.pageNumber)),e?.pageSize&&t.append("pageSize",String(e.pageSize)),e?.sortBy&&t.append("sortBy",e.sortBy),e?.sortOrder&&t.append("sortOrder",e.sortOrder);let s=await (0,n.ac)().get(`/organizations?${t.toString()}`);return s.data},getOrganizationById:async e=>{let t=await (0,n.ac)().get(`/organizations/${e}`);return t.data},getOrganizationByCode:async(e,t)=>{let s=await (0,n.ac)().get(`/organizations/code/${e}?tenantId=${t}`);return s.data},createOrganization:async e=>{let t=await (0,n.ac)().post("/organizations",e);return t.data},updateOrganization:async(e,t)=>{let s=await (0,n.ac)().put(`/organizations/${e}`,t);return s.data},deleteOrganization:async e=>{let t=await (0,n.ac)().delete(`/organizations/${e}`);return t.data},moveOrganization:async(e,t)=>{let s=await (0,n.ac)().patch(`/organizations/${e}/move`,t);return s.data},getHierarchy:async(e,t)=>{let s=new URLSearchParams({tenantId:e});t&&s.append("rootOrganizationId",t);let a=await (0,n.ac)().get(`/organizations/hierarchy?${s.toString()}`);return a.data},getChildOrganizations:async e=>{let t=await (0,n.ac)().get(`/organizations/${e}/children`);return t.data},getBranchesByOrganization:async e=>{let t=await (0,n.ac)().get(`/organizations/${e}/branches`);return t.data},moveBranches:async(e,t)=>{let s=await (0,n.ac)().patch(`/organizations/${e}/branches/move`,t);return s.data},getStatistics:async e=>{let t=e?`?tenantId=${e}`:"",s=await (0,n.ac)().get(`/organizations/statistics${t}`);return s.data},toggleStatus:async e=>{let t=await (0,n.ac)().patch(`/organizations/${e}/toggle-status`);return t.data}};var o=s(1303),d=s(4981),c=s(9285),x=s(7955),m=s(6895),g=s(7630),h=s(7250),u=s(5780),p=s(4265),y=s(1892);function j({organization:e,onClose:t,onSaved:s}){let{user:n}=(0,i.t)(),d=!!e,[j,b]=(0,r.useState)(!1),[v,f]=(0,r.useState)([]),[N,w]=(0,r.useState)("basic"),[C,z]=(0,r.useState)({name:e?.name||"",code:e?.code||"",type:e?.type||"",description:e?.description||"",status:e?.status||"active",parentOrganizationId:e?.parentOrganizationId||"",addressLine1:e?.addressLine1||"",addressLine2:e?.addressLine2||"",city:e?.city||"",stateProvince:e?.stateProvince||"",postalCode:e?.postalCode||"",countryCode:e?.countryCode||"US",phone:e?.phone||"",email:e?.email||"",website:e?.website||"",primaryContactName:e?.primaryContactName||"",primaryContactEmail:e?.primaryContactEmail||"",primaryContactPhone:e?.primaryContactPhone||"",timezone:e?.timezone||"UTC",languageCode:e?.languageCode||"en",currencyCode:e?.currencyCode||"USD",operationalSince:e?.operationalSince?.split("T")[0]||"",registrationNumber:e?.registrationNumber||""});(0,r.useEffect)(()=>{S()},[]);let S=async()=>{try{let t=await l.getAllOrganizations({tenantId:n?.tenantId,status:"active",pageSize:100}),s=t.organizations;e&&(s=s.filter(t=>t.id!==e.id)),f(s)}catch(e){console.error("Error loading parent organizations:",e)}},k=async t=>{if(t.preventDefault(),!C.name.trim()){alert("Organization name is required");return}try{if(b(!0),d&&e){let t={name:C.name,type:C.type||void 0,description:C.description||void 0,status:C.status,addressLine1:C.addressLine1||void 0,addressLine2:C.addressLine2||void 0,city:C.city||void 0,stateProvince:C.stateProvince||void 0,postalCode:C.postalCode||void 0,countryCode:C.countryCode||void 0,phone:C.phone||void 0,email:C.email||void 0,website:C.website||void 0,primaryContactName:C.primaryContactName||void 0,primaryContactEmail:C.primaryContactEmail||void 0,primaryContactPhone:C.primaryContactPhone||void 0,timezone:C.timezone||void 0,languageCode:C.languageCode||void 0,currencyCode:C.currencyCode||void 0,operationalSince:C.operationalSince||void 0,registrationNumber:C.registrationNumber||void 0};await l.updateOrganization(e.id,t)}else{let e={tenantId:n?.tenantId||"",name:C.name,code:C.code||void 0,type:C.type||void 0,description:C.description||void 0,status:C.status,parentOrganizationId:C.parentOrganizationId||void 0,addressLine1:C.addressLine1||void 0,addressLine2:C.addressLine2||void 0,city:C.city||void 0,stateProvince:C.stateProvince||void 0,postalCode:C.postalCode||void 0,countryCode:C.countryCode||void 0,phone:C.phone||void 0,email:C.email||void 0,website:C.website||void 0,primaryContactName:C.primaryContactName||void 0,primaryContactEmail:C.primaryContactEmail||void 0,primaryContactPhone:C.primaryContactPhone||void 0,timezone:C.timezone||void 0,languageCode:C.languageCode||void 0,currencyCode:C.currencyCode||void 0,operationalSince:C.operationalSince||void 0,registrationNumber:C.registrationNumber||void 0};await l.createOrganization(e)}s()}catch(e){console.error("Error saving organization:",e),alert(e.response?.data?.message||"Failed to save organization")}finally{b(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(o.Z,{className:"h-6 w-6 text-indigo-600"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:d?"Edit Organization":"Create New Organization"})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(c.Z,{className:"h-6 w-6"})})]}),(0,a.jsxs)("div",{className:"flex border-b border-gray-200 px-6",children:[a.jsx("button",{onClick:()=>w("basic"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"basic"===N?"border-indigo-600 text-indigo-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Basic Info"}),a.jsx("button",{onClick:()=>w("contact"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"contact"===N?"border-indigo-600 text-indigo-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Contact & Address"}),a.jsx("button",{onClick:()=>w("config"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"config"===N?"border-indigo-600 text-indigo-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Configuration"})]}),(0,a.jsxs)("form",{onSubmit:k,className:"flex-1 overflow-y-auto p-6",children:["basic"===N&&a.jsx("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Organization Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",required:!0,value:C.name,onChange:e=>z({...C,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter organization name"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Organization Code"}),a.jsx("input",{type:"text",value:C.code,onChange:e=>z({...C,code:e.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 font-mono",placeholder:"ORG001",disabled:d}),d&&a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Code cannot be changed after creation"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Organization Type"}),(0,a.jsxs)("select",{value:C.type,onChange:e=>z({...C,type:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[a.jsx("option",{value:"",children:"Select type"}),a.jsx("option",{value:"Hospital",children:"Hospital"}),a.jsx("option",{value:"Clinic",children:"Clinic"}),a.jsx("option",{value:"Diagnostic",children:"Diagnostic Center"}),a.jsx("option",{value:"Pharmacy",children:"Pharmacy"}),a.jsx("option",{value:"Laboratory",children:"Laboratory"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Organization"}),(0,a.jsxs)("select",{value:C.parentOrganizationId,onChange:e=>z({...C,parentOrganizationId:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[a.jsx("option",{value:"",children:"None (Root Organization)"}),v.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," ",e.code&&`(${e.code})`]},e.id))]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,a.jsxs)("select",{value:C.status,onChange:e=>z({...C,status:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"inactive",children:"Inactive"}),a.jsx("option",{value:"suspended",children:"Suspended"})]})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{value:C.description,onChange:e=>z({...C,description:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter organization description"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[a.jsx(x.Z,{className:"h-4 w-4 inline mr-1"}),"Operational Since"]}),a.jsx("input",{type:"date",value:C.operationalSince,onChange:e=>z({...C,operationalSince:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[a.jsx(m.Z,{className:"h-4 w-4 inline mr-1"}),"Registration Number"]}),a.jsx("input",{type:"text",value:C.registrationNumber,onChange:e=>z({...C,registrationNumber:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"REG123456"})]})]})}),"contact"===N&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[a.jsx(g.Z,{className:"h-5 w-5 mr-2 text-indigo-600"}),"Address Information"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 1"}),a.jsx("input",{type:"text",value:C.addressLine1,onChange:e=>z({...C,addressLine1:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Street address"})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 2"}),a.jsx("input",{type:"text",value:C.addressLine2,onChange:e=>z({...C,addressLine2:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Apartment, suite, etc."})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),a.jsx("input",{type:"text",value:C.city,onChange:e=>z({...C,city:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State/Province"}),a.jsx("input",{type:"text",value:C.stateProvince,onChange:e=>z({...C,stateProvince:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postal Code"}),a.jsx("input",{type:"text",value:C.postalCode,onChange:e=>z({...C,postalCode:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country Code"}),a.jsx("input",{type:"text",value:C.countryCode,onChange:e=>z({...C,countryCode:e.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 font-mono",placeholder:"US",maxLength:2})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[a.jsx(h.Z,{className:"h-5 w-5 mr-2 text-indigo-600"}),"Contact Information"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[a.jsx(h.Z,{className:"h-4 w-4 inline mr-1"}),"Phone"]}),a.jsx("input",{type:"tel",value:C.phone,onChange:e=>z({...C,phone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"+1 (555) 123-4567"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[a.jsx(u.Z,{className:"h-4 w-4 inline mr-1"}),"Email"]}),a.jsx("input",{type:"email",value:C.email,onChange:e=>z({...C,email:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"contact@organization.com"})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[a.jsx(p.Z,{className:"h-4 w-4 inline mr-1"}),"Website"]}),a.jsx("input",{type:"url",value:C.website,onChange:e=>z({...C,website:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"https://www.organization.com"})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Contact Name"}),a.jsx("input",{type:"text",value:C.primaryContactName,onChange:e=>z({...C,primaryContactName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"John Doe"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Contact Email"}),a.jsx("input",{type:"email",value:C.primaryContactEmail,onChange:e=>z({...C,primaryContactEmail:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"john.doe@organization.com"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Contact Phone"}),a.jsx("input",{type:"tel",value:C.primaryContactPhone,onChange:e=>z({...C,primaryContactPhone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"+1 (555) 123-4567"})]})]})]})]}),"config"===N&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Timezone"}),(0,a.jsxs)("select",{value:C.timezone,onChange:e=>z({...C,timezone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[a.jsx("option",{value:"UTC",children:"UTC"}),a.jsx("option",{value:"America/New_York",children:"Eastern Time"}),a.jsx("option",{value:"America/Chicago",children:"Central Time"}),a.jsx("option",{value:"America/Denver",children:"Mountain Time"}),a.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time"}),a.jsx("option",{value:"Asia/Kolkata",children:"India Standard Time"}),a.jsx("option",{value:"Europe/London",children:"London"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Language"}),(0,a.jsxs)("select",{value:C.languageCode,onChange:e=>z({...C,languageCode:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[a.jsx("option",{value:"en",children:"English"}),a.jsx("option",{value:"es",children:"Spanish"}),a.jsx("option",{value:"fr",children:"French"}),a.jsx("option",{value:"de",children:"German"}),a.jsx("option",{value:"hi",children:"Hindi"}),a.jsx("option",{value:"ar",children:"Arabic"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),(0,a.jsxs)("select",{value:C.currencyCode,onChange:e=>z({...C,currencyCode:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[a.jsx("option",{value:"USD",children:"USD - US Dollar"}),a.jsx("option",{value:"EUR",children:"EUR - Euro"}),a.jsx("option",{value:"GBP",children:"GBP - British Pound"}),a.jsx("option",{value:"INR",children:"INR - Indian Rupee"}),a.jsx("option",{value:"AED",children:"AED - UAE Dirham"}),a.jsx("option",{value:"CAD",children:"CAD - Canadian Dollar"})]})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Note:"})," These configuration settings will be used as defaults for all branches under this organization. Individual branches can override these settings if needed."]})})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium",disabled:j,children:"Cancel"}),(0,a.jsxs)("button",{onClick:k,disabled:j,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[j&&a.jsx(y.Z,{className:"h-4 w-4 mr-2 animate-spin"}),d?"Update Organization":"Create Organization"]})]})]})})}var b=s(2268),v=s(8839),f=s(3499);function N({organization:e,onClose:t,onEdit:s}){let r=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A";return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(o.Z,{className:"h-6 w-6 text-indigo-600"}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:e.name}),e.code&&a.jsx("p",{className:"text-sm text-gray-500 font-mono",children:e.code})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("button",{onClick:s,className:"px-3 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium flex items-center",children:[a.jsx(b.Z,{className:"h-4 w-4 mr-2"}),"Edit"]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(c.Z,{className:"h-6 w-6"})})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[a.jsx(o.Z,{className:"h-5 w-5 mr-2 text-indigo-600"}),"Basic Information"]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Organization Type"}),a.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-semibold ${(e=>{switch(e){case"Hospital":return"bg-blue-100 text-blue-800";case"Clinic":return"bg-green-100 text-green-800";case"Diagnostic":return"bg-purple-100 text-purple-800";case"Pharmacy":return"bg-orange-100 text-orange-800";case"Laboratory":return"bg-pink-100 text-pink-800";default:return"bg-gray-100 text-gray-800"}})(e.type)}`,children:e.type||"N/A"})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Status"}),a.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-semibold capitalize ${(e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"inactive":default:return"bg-gray-100 text-gray-800";case"suspended":return"bg-red-100 text-red-800"}})(e.status)}`,children:e.status||"N/A"})]}),void 0!==e.hierarchyLevel&&(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Hierarchy Level"}),(0,a.jsxs)("p",{className:"text-sm text-gray-900",children:["Level ",e.hierarchyLevel]})]}),e.parentOrganizationName&&(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Parent Organization"}),a.jsx("p",{className:"text-sm text-gray-900",children:e.parentOrganizationName})]})]}),e.description&&(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Description"}),a.jsx("p",{className:"text-sm text-gray-700 mt-1",children:e.description})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Statistics"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[a.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Total Branches"}),a.jsx("p",{className:"text-2xl font-bold text-blue-700",children:e.totalBranches||0})]}),a.jsx(v.Z,{className:"h-8 w-8 text-blue-400"})]})}),a.jsx("div",{className:"bg-green-50 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-green-600",children:"Total Users"}),a.jsx("p",{className:"text-2xl font-bold text-green-700",children:e.totalUsers||0})]}),a.jsx(f.Z,{className:"h-8 w-8 text-green-400"})]})}),a.jsx("div",{className:"bg-purple-50 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Child Orgs"}),a.jsx("p",{className:"text-2xl font-bold text-purple-700",children:e.totalChildOrganizations||0})]}),a.jsx(o.Z,{className:"h-8 w-8 text-purple-400"})]})})]})]}),(e.addressLine1||e.city)&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[a.jsx(g.Z,{className:"h-5 w-5 mr-2 text-indigo-600"}),"Address"]}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"text-sm text-gray-700 space-y-1",children:[e.addressLine1&&a.jsx("p",{children:e.addressLine1}),e.addressLine2&&a.jsx("p",{children:e.addressLine2}),a.jsx("p",{children:[e.city,e.stateProvince,e.postalCode].filter(Boolean).join(", ")}),e.countryCode&&a.jsx("p",{children:e.countryCode})]})})]}),(e.phone||e.email||e.website)&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[a.jsx(h.Z,{className:"h-5 w-5 mr-2 text-indigo-600"}),"Contact Information"]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[e.phone&&(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(h.Z,{className:"h-4 w-4 text-gray-400 mr-3"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Phone"}),a.jsx("p",{className:"text-sm text-gray-900",children:e.phone})]})]}),e.email&&(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(u.Z,{className:"h-4 w-4 text-gray-400 mr-3"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Email"}),a.jsx("a",{href:`mailto:${e.email}`,className:"text-sm text-indigo-600 hover:text-indigo-700",children:e.email})]})]}),e.website&&(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(p.Z,{className:"h-4 w-4 text-gray-400 mr-3"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Website"}),a.jsx("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-indigo-600 hover:text-indigo-700",children:e.website})]})]})]})]}),(e.primaryContactName||e.primaryContactEmail||e.primaryContactPhone)&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Primary Contact"}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[e.primaryContactName&&(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Name"}),a.jsx("p",{className:"text-sm text-gray-900",children:e.primaryContactName})]}),e.primaryContactEmail&&(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Email"}),a.jsx("a",{href:`mailto:${e.primaryContactEmail}`,className:"text-sm text-indigo-600 hover:text-indigo-700",children:e.primaryContactEmail})]}),e.primaryContactPhone&&(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Phone"}),a.jsx("p",{className:"text-sm text-gray-900",children:e.primaryContactPhone})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Configuration"}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Timezone"}),a.jsx("p",{className:"text-sm text-gray-900",children:e.timezone||"UTC"})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Language"}),a.jsx("p",{className:"text-sm text-gray-900",children:e.languageCode?.toUpperCase()||"EN"})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Currency"}),a.jsx("p",{className:"text-sm text-gray-900",children:e.currencyCode||"USD"})]})]})})]}),(e.operationalSince||e.registrationNumber)&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Operations"}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[e.operationalSince&&(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(x.Z,{className:"h-4 w-4 text-gray-400 mr-3"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Operational Since"}),a.jsx("p",{className:"text-sm text-gray-900",children:r(e.operationalSince)})]})]}),e.registrationNumber&&(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(m.Z,{className:"h-4 w-4 text-gray-400 mr-3"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Registration Number"}),a.jsx("p",{className:"text-sm text-gray-900 font-mono",children:e.registrationNumber})]})]})]})})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Audit Information"}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Created"}),a.jsx("p",{className:"text-gray-900",children:r(e.createdAt)}),e.createdBy&&(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["by ",e.createdBy]})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Last Updated"}),a.jsx("p",{className:"text-gray-900",children:r(e.updatedAt)}),e.updatedBy&&(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["by ",e.updatedBy]})]})]})})]})]})}),a.jsx("div",{className:"flex items-center justify-end p-6 border-t border-gray-200",children:a.jsx("button",{onClick:t,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium",children:"Close"})})]})})}var w=s(8836),C=s(6081);function z({node:e,level:t,onSelectOrganization:s}){let[i,n]=(0,r.useState)(t<2),l=e.children&&e.children.length>0;return(0,a.jsxs)("div",{className:"select-none",children:[(0,a.jsxs)("div",{className:`flex items-center space-x-2 py-2 px-3 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors border-l-4 ${(e=>{switch(e){case"active":return"border-green-400";case"inactive":default:return"border-gray-400";case"suspended":return"border-red-400"}})(e.status)}`,style:{marginLeft:`${24*t}px`},onClick:()=>s?.(e),children:[a.jsx("button",{onClick:e=>{e.stopPropagation(),l&&n(!i)},className:`flex-shrink-0 ${l?"text-gray-600 hover:text-gray-900":"text-transparent"}`,children:l?i?a.jsx(w.Z,{className:"h-4 w-4"}):a.jsx(C.Z,{className:"h-4 w-4"}):a.jsx("div",{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"flex-1 flex items-center justify-between min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 min-w-0 flex-1",children:[a.jsx(o.Z,{className:"h-5 w-5 text-indigo-600 flex-shrink-0"}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),e.code&&(0,a.jsxs)("span",{className:"text-xs text-gray-500 font-mono flex-shrink-0",children:["(",e.code,")"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs font-semibold ${(e=>{switch(e){case"Hospital":return"bg-blue-100 text-blue-800";case"Clinic":return"bg-green-100 text-green-800";case"Diagnostic":return"bg-purple-100 text-purple-800";case"Pharmacy":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}})(e.type)}`,children:e.type||"N/A"}),void 0!==e.hierarchyLevel&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["Level ",e.hierarchyLevel]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 flex-shrink-0 ml-4",children:[void 0!==e.totalBranches&&e.totalBranches>0&&(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-xs text-gray-600",children:[a.jsx(v.Z,{className:"h-4 w-4"}),a.jsx("span",{children:e.totalBranches})]}),void 0!==e.totalUsers&&e.totalUsers>0&&(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-xs text-gray-600",children:[a.jsx(f.Z,{className:"h-4 w-4"}),a.jsx("span",{children:e.totalUsers})]}),l&&(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-xs text-indigo-600 font-medium",children:[a.jsx(o.Z,{className:"h-4 w-4"}),a.jsx("span",{children:e.children.length})]})]})]})]}),l&&i&&a.jsx("div",{className:"mt-1",children:e.children.map(e=>a.jsx(z,{node:e,level:t+1,onSelectOrganization:s},e.id))})]})}function S({tenantId:e,rootOrganizationId:t,onClose:s}){let[i,n]=(0,r.useState)(!0),[d,x]=(0,r.useState)(null),[m,g]=(0,r.useState)(null),[h,u]=(0,r.useState)(null);(0,r.useEffect)(()=>{p()},[e,t]);let p=async()=>{try{n(!0),x(null);let s=await l.getHierarchy(e,t);g(s)}catch(e){console.error("Error loading hierarchy:",e),x(e.response?.data?.message||"Failed to load organization hierarchy")}finally{n(!1)}},j=e=>{let t=1;return e.children&&e.children.forEach(e=>{t+=j(e)}),t},b=e=>{let t=e.totalBranches||0;return e.children&&e.children.forEach(e=>{t+=b(e)}),t},N=e=>{let t=e.totalUsers||0;return e.children&&e.children.forEach(e=>{t+=N(e)}),t};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(o.Z,{className:"h-6 w-6 text-indigo-600"}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Organization Hierarchy"}),a.jsx("p",{className:"text-sm text-gray-500",children:"View the complete organizational structure"})]})]}),a.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(c.Z,{className:"h-6 w-6"})})]}),!i&&m&&a.jsx("div",{className:"p-6 border-b border-gray-200 bg-gray-50",children:(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[a.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Organizations"}),a.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:j(m)})]}),a.jsx(o.Z,{className:"h-8 w-8 text-indigo-400"})]})}),a.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Branches"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:b(m)})]}),a.jsx(v.Z,{className:"h-8 w-8 text-blue-400"})]})}),a.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:N(m)})]}),a.jsx(f.Z,{className:"h-8 w-8 text-green-400"})]})}),a.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Max Depth"}),a.jsx("p",{className:"text-2xl font-bold text-purple-600",children:void 0!==m.hierarchyLevel?m.hierarchyLevel+1:1})]}),a.jsx("div",{className:"h-8 w-8 text-purple-400 font-bold text-2xl",children:"âˆž"})]})})]})}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[i&&a.jsx("div",{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(y.Z,{className:"h-8 w-8 animate-spin text-indigo-600 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-600",children:"Loading hierarchy..."})]})}),d&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-red-800",children:d}),a.jsx("button",{onClick:p,className:"mt-2 text-sm text-red-600 hover:text-red-700 font-medium",children:"Try Again"})]}),!i&&!d&&m&&(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"mb-4 flex items-center space-x-4 text-xs text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 border-l-4 border-green-400 rounded"}),a.jsx("span",{children:"Active"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 border-l-4 border-gray-400 rounded"}),a.jsx("span",{children:"Inactive"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 border-l-4 border-red-400 rounded"}),a.jsx("span",{children:"Suspended"})]})]}),a.jsx(z,{node:m,level:0,onSelectOrganization:u})]}),!i&&!d&&!m&&(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(o.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-600",children:"No organizations found"})]})]}),h&&(0,a.jsxs)("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Selected Organization"}),a.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Name"}),a.jsx("p",{className:"text-sm text-gray-900",children:h.name})]}),h.code&&(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Code"}),a.jsx("p",{className:"text-sm text-gray-900 font-mono",children:h.code})]}),h.type&&(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Type"}),a.jsx("p",{className:"text-sm text-gray-900",children:h.type})]}),void 0!==h.hierarchyLevel&&(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Hierarchy Level"}),(0,a.jsxs)("p",{className:"text-sm text-gray-900",children:["Level ",h.hierarchyLevel]})]}),void 0!==h.totalBranches&&(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Branches"}),a.jsx("p",{className:"text-sm text-gray-900",children:h.totalBranches})]}),void 0!==h.totalUsers&&(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Users"}),a.jsx("p",{className:"text-sm text-gray-900",children:h.totalUsers})]})]})})]}),a.jsx("div",{className:"flex items-center justify-end p-6 border-t border-gray-200",children:a.jsx("button",{onClick:s,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium",children:"Close"})})]})})}var k=s(4714);function O({isOpen:e,title:t,message:s,itemName:r,confirmText:i="Delete",cancelText:n="Cancel",loading:l=!1,error:o,onConfirm:d,onCancel:x}){return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-red-100",children:a.jsx(k.Z,{className:"h-6 w-6 text-red-600"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t})]}),a.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:l,children:a.jsx(c.Z,{className:"h-6 w-6"})})]}),(0,a.jsxs)("div",{className:"p-6",children:[a.jsx("p",{className:"text-gray-700 mb-4",children:s}),r&&a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3 mb-4",children:a.jsx("p",{className:"text-sm font-medium text-gray-900",children:r})}),o&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:a.jsx("p",{className:"text-sm text-red-800",children:o})}),a.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:(0,a.jsxs)("p",{className:"text-sm text-amber-800",children:[a.jsx("strong",{children:"Warning:"})," This action cannot be undone."]})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:x,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium",disabled:l,children:n}),(0,a.jsxs)("button",{onClick:d,disabled:l,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[l&&a.jsx(y.Z,{className:"h-4 w-4 mr-2 animate-spin"}),i]})]})]})}):null}function P(){let{user:e}=(0,i.t)(),[t,s]=(0,r.useState)([]),[n,c]=(0,r.useState)(!0),[x,m]=(0,r.useState)(null),[g,h]=(0,r.useState)(0),[u,p]=(0,r.useState)(0),[y,b]=(0,r.useState)(""),[v,f]=(0,r.useState)(""),[w,C]=(0,r.useState)(""),[z,k]=(0,r.useState)(1),[P,L]=(0,r.useState)(!1),[E,A]=(0,r.useState)(!1),[Z,B]=(0,r.useState)(!1),[I,U]=(0,r.useState)(!1),[D,$]=(0,r.useState)(!1),[T,q]=(0,r.useState)(null),[_,H]=(0,r.useState)(null);(0,r.useEffect)(()=>{R()},[y,v,w,z]);let R=async()=>{try{c(!0),m(null);let t={tenantId:e?.tenantId,search:y||void 0,type:v||void 0,status:w||void 0,pageNumber:z,pageSize:10,sortBy:"name",sortOrder:"asc"},a=await l.getAllOrganizations(t);s(a.organizations),h(a.totalCount),p(a.totalPages)}catch(e){console.error("Error loading organizations:",e),m(e.response?.data?.message||"Failed to load organizations")}finally{c(!1)}},G=async e=>{try{let t=await l.getOrganizationById(e.id);H(t),B(!0)}catch(e){console.error("Error loading organization details:",e),alert("Failed to load organization details")}},M=async e=>{try{let t=await l.getOrganizationById(e.id);H(t),A(!0)}catch(e){console.error("Error loading organization details:",e),alert("Failed to load organization details")}},F=e=>{q(e),$(!0)},V=async()=>{if(T){if(T.totalBranches&&T.totalBranches>0){alert(`Cannot delete organization with ${T.totalBranches} branches. Please move branches to another organization first.`);return}try{await l.deleteOrganization(T.id),$(!1),q(null),R()}catch(e){console.error("Error deleting organization:",e),alert(e.response?.data?.message||"Failed to delete organization")}}},W=()=>{L(!1),A(!1),H(null),R()},Y=e=>{switch(e?.toLowerCase()){case"hospital":return"bg-blue-100 text-blue-800";case"clinic":return"bg-green-100 text-green-800";case"diagnostic":return"bg-purple-100 text-purple-800";case"pharmacy":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},J=e=>{switch(e.toLowerCase()){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"suspended":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}};return(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(o.Z,{className:"h-8 w-8 text-indigo-600"}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Organization Management"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Manage hospital organizations and their structure"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsxs)("button",{onClick:()=>U(!0),className:"flex items-center px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm font-medium",children:[a.jsx(d.Z,{className:"h-4 w-4 mr-2"}),"View Hierarchy"]}),a.jsx("button",{onClick:()=>L(!0),className:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 text-sm font-medium",children:"Create Organization"})]})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"flex-1",children:a.jsx("div",{className:"relative",children:a.jsx("input",{type:"text",placeholder:"Search by name or code...",value:y,onChange:e=>{b(e.target.value),k(1)},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})})}),(0,a.jsxs)("select",{value:v,onChange:e=>{f(e.target.value),k(1)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[a.jsx("option",{value:"",children:"All Types"}),a.jsx("option",{value:"Hospital",children:"Hospital"}),a.jsx("option",{value:"Clinic",children:"Clinic"}),a.jsx("option",{value:"Diagnostic",children:"Diagnostic"}),a.jsx("option",{value:"Pharmacy",children:"Pharmacy"})]}),(0,a.jsxs)("select",{value:w,onChange:e=>{C(e.target.value),k(1)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[a.jsx("option",{value:"",children:"All Status"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"inactive",children:"Inactive"}),a.jsx("option",{value:"suspended",children:"Suspended"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[(0,a.jsxs)("span",{children:["Showing ",t.length," of ",g," organizations"]}),(y||v||w)&&a.jsx("button",{onClick:()=>{b(""),f(""),C(""),k(1)},className:"text-indigo-600 hover:text-indigo-700 font-medium",children:"Clear Filters"})]})]}),x&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start space-x-3",children:(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading organizations"}),a.jsx("p",{className:"text-sm text-red-700 mt-1",children:x})]})}),n&&a.jsx("div",{className:"flex items-center justify-center py-12"}),!n&&t.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Organization"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Parent"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Branches"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Staff"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(o.Z,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name}),e.hierarchyLevel>0&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Level ",e.hierarchyLevel]})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-900 font-mono",children:e.code||"â€”"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.type?a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Y(e.type)}`,children:e.type}):a.jsx("span",{className:"text-sm text-gray-400",children:"â€”"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-900",children:e.parentOrganizationName||"â€”"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.totalBranches})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.totalUsers})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${J(e.status)}`,children:e.status})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[a.jsx("button",{onClick:()=>G(e),className:"text-indigo-600 hover:text-indigo-900",title:"View Details"}),a.jsx("button",{onClick:()=>M(e),className:"text-blue-600 hover:text-blue-900",title:"Edit"}),a.jsx("button",{onClick:()=>F(e),className:"text-red-600 hover:text-red-900",title:"Delete"})]})})]},e.id))})]})}),u>1&&(0,a.jsxs)("div",{className:"bg-gray-50 px-6 py-4 flex items-center justify-between border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-700",children:["Page ",z," of ",u]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>k(Math.max(1,z-1)),disabled:1===z,className:"px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),a.jsx("button",{onClick:()=>k(Math.min(u,z+1)),disabled:z===u,className:"px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]}),!n&&0===t.length&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[a.jsx(o.Z,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No organizations found"}),a.jsx("p",{className:"text-gray-600 mb-6",children:y||v||w?"Try adjusting your filters":"Get started by creating your first organization"}),!y&&!v&&!w&&a.jsx("button",{onClick:()=>L(!0),className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 text-sm font-medium",children:"Create Organization"})]}),P&&a.jsx(j,{onClose:()=>L(!1),onSaved:W}),E&&_&&a.jsx(j,{organization:_,onClose:()=>{A(!1),H(null)},onSaved:W}),Z&&_&&a.jsx(N,{organization:_,onClose:()=>{B(!1),H(null)},onEdit:()=>{B(!1),A(!0)}}),I&&a.jsx(S,{tenantId:e?.tenantId||"",onClose:()=>U(!1)}),D&&T&&a.jsx(O,{isOpen:D,title:"Delete Organization",message:T.totalBranches&&T.totalBranches>0?`This organization has ${T.totalBranches} branch${T.totalBranches>1?"es":""}. You must move all branches to another organization before deleting.`:"Are you sure you want to delete this organization? This action cannot be undone.",itemName:T.name,onConfirm:V,onCancel:()=>{$(!1),q(null)}})]})}},5884:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>o});var a=s(8390);let r=(0,a.createProxy)(String.raw`C:\Users\Sam Aluri\Downloads\Hospital Portal\apps\hospital-portal-web\src\app\dashboard\admin\organizations\page.tsx`),{__esModule:i,$$typeof:n}=r,l=r.default,o=l}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[2723,4479,3698,5033,5235,1728,347,4905,8815,5136,1805,2765],()=>s(3715));module.exports=a})();