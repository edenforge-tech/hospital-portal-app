(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[663],{7965:function(e,s,i){Promise.resolve().then(i.bind(i,1771))},1771:function(e,s,i){"use strict";i.r(s),i.d(s,{default:function(){return x}});var r=i(5650),n=i(3966),a=i(9856),t=i(2317),l=i(127),d=i.n(l),o=i(5830);function c(){let{roles:e,hasPermission:s}=(0,o.c_)(),[i,n]=(0,t.useState)(!1);return(0,r.jsxs)("div",{className:"w-64 bg-indigo-900 text-white shadow-lg overflow-y-auto",children:[(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Eye Hospital"}),(0,r.jsx)("p",{className:"text-indigo-200 text-sm",children:"Management System"})]}),(0,r.jsxs)("nav",{className:"mt-8 space-y-2",children:[[{label:"Dashboard",href:"/dashboard",icon:"\uD83D\uDCCA",requiredPermission:null},{label:"Patients",href:"/dashboard/patients",icon:"\uD83D\uDC65",requiredPermission:"patient.view"},{label:"Appointments",href:"/dashboard/appointments",icon:"\uD83D\uDCC5",requiredPermission:"appointment.view"},{label:"Examinations",href:"/dashboard/examinations",icon:"�",requiredPermission:"clinical_examination.view"}].map(e=>{let i=!e.requiredPermission||s(e.requiredPermission);return i?(0,r.jsxs)(d(),{href:e.href,className:"flex items-center px-6 py-3 text-indigo-100 hover:bg-indigo-800 transition",children:[(0,r.jsx)("span",{className:"mr-3",children:e.icon}),e.label]},e.href):null}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("button",{onClick:()=>n(!i),className:"flex items-center justify-between w-full px-6 py-3 text-indigo-100 hover:bg-indigo-800 transition",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"mr-3",children:"\uD83D\uDD27"}),(0,r.jsx)("span",{children:"Admin Management"})]}),(0,r.jsx)("span",{className:"text-xs",children:i?"▼":"▶"})]}),i&&(0,r.jsx)("div",{className:"bg-indigo-950 bg-opacity-50",children:[{label:"Overview",href:"/dashboard/admin/overview",icon:"\uD83D\uDCCB",requiredPermission:"admin.dashboard.view"},{label:"Users",href:"/dashboard/admin/users",icon:"\uD83D\uDC65",requiredPermission:"user.view"},{label:"Roles",href:"/dashboard/admin/roles",icon:"\uD83D\uDD10",requiredPermission:"role.view"},{label:"Permissions",href:"/dashboard/admin/permissions",icon:"\uD83D\uDEE1️",requiredPermission:"permission.view"},{label:"Tenants",href:"/dashboard/admin/tenants",icon:"\uD83C\uDFDB️",requiredPermission:"tenant.view"},{label:"Organizations",href:"/dashboard/admin/organizations",icon:"\uD83C\uDFD7️",requiredPermission:"organization.view"},{label:"Branches",href:"/dashboard/admin/branches",icon:"\uD83C\uDFE2",requiredPermission:"branch.view"},{label:"Departments",href:"/dashboard/admin/departments",icon:"\uD83C\uDFE5",requiredPermission:"department.view"},{label:"Audit Logs",href:"/dashboard/admin/audit-logs",icon:"\uD83D\uDCDD",requiredPermission:"audit.view"},{label:"Devices",href:"/dashboard/admin/devices",icon:"\uD83D\uDCF1",requiredPermission:"device.view"},{label:"Sessions",href:"/dashboard/admin/sessions",icon:"\uD83D\uDD11",requiredPermission:"session.view"},{label:"Emergency Access",href:"/dashboard/admin/emergency-access",icon:"\uD83D\uDEA8",requiredPermission:"emergency_access.view"},{label:"Settings",href:"/dashboard/admin/settings",icon:"⚙️",requiredPermission:"system_settings.view"}].map(e=>{let i=!e.requiredPermission||s(e.requiredPermission);return i?(0,r.jsxs)(d(),{href:e.href,className:"flex items-center pl-12 pr-6 py-2 text-indigo-200 text-sm hover:bg-indigo-800 transition",children:[(0,r.jsx)("span",{className:"mr-3",children:e.icon}),e.label]},e.href):null})})]})]})]})}function m(){let{user:e,logout:s}=(0,n.t)();return(0,r.jsxs)("div",{className:"bg-white border-b p-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("button",{className:"text-gray-600",children:"☰"}),(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Dashboard"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[e&&(0,r.jsxs)("div",{className:"text-sm text-gray-700",children:[e.firstName," ",e.lastName]}),(0,r.jsx)("button",{onClick:()=>s(),className:"text-sm text-gray-600 hover:text-gray-800",children:"Logout"})]})]})}var u=i(8401),h=i(9216);function x(e){let{children:s}=e,i=(0,a.useRouter)(),{token:l,user:d}=(0,n.t)(),[o,x]=(0,t.useState)(!1),[b,f]=(0,t.useState)(!1);return((0,t.useEffect)(()=>{x(!0),(0,n.R)(),(0,h.qN)(),setTimeout(()=>f(!0),100)},[]),(0,t.useEffect)(()=>{b&&!l&&i.push("/auth/login")},[b,l,i]),o&&b&&l)?(0,r.jsx)(u.i,{children:(0,r.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,r.jsx)(c,{}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,r.jsx)(m,{}),(0,r.jsx)("main",{className:"flex-1 overflow-auto",children:(0,r.jsx)("div",{className:"p-6",children:s})})]})]})}):(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})})}}},function(e){e.O(0,[675,127,336,510,662,744],function(){return e(e.s=7965)}),_N_E=e.O()}]);