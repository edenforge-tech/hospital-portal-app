(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[86],{1546:function(e,t,s){Promise.resolve().then(s.bind(s,1835))},1835:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return k}});var a=s(5650),n=s(2317),r=s(3966),i=s(4182),o=s(7999),l=s(9357),c=s(8340),d=s(7991),u=s(1509);let p={scheduled:"#3B82F6",confirmed:"#10B981","in-progress":"#F59E0B",completed:"#6B7280",cancelled:"#EF4444","no-show":"#DC2626"};function m(e){let{appointments:t,onEventClick:s,onDateClick:r,onEventDrop:i,loading:m=!1}=e,g=(0,n.useRef)(null),[x,h]=(0,n.useState)("dayGridMonth"),v=t.map(e=>({id:e.id,title:"".concat(e.patientName," - ").concat(e.doctorName),start:"".concat(e.appointmentDate,"T").concat(e.startTime),end:e.endTime?"".concat(e.appointmentDate,"T").concat(e.endTime):void 0,backgroundColor:p[e.status]||"#3B82F6",borderColor:p[e.status]||"#3B82F6",extendedProps:{appointment:e}})),f=e=>{h(e),g.current&&g.current.getApi().changeView(e)};return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>f("dayGridMonth"),className:"px-4 py-2 rounded ".concat("dayGridMonth"===x?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Month"}),(0,a.jsx)("button",{onClick:()=>f("timeGridWeek"),className:"px-4 py-2 rounded ".concat("timeGridWeek"===x?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Week"}),(0,a.jsx)("button",{onClick:()=>f("timeGridDay"),className:"px-4 py-2 rounded ".concat("timeGridDay"===x?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Day"}),(0,a.jsx)("button",{onClick:()=>f("listWeek"),className:"px-4 py-2 rounded ".concat("listWeek"===x?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"List"})]}),(0,a.jsxs)("div",{className:"flex gap-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded",style:{backgroundColor:"#3B82F6"}}),(0,a.jsx)("span",{children:"Scheduled"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded",style:{backgroundColor:"#10B981"}}),(0,a.jsx)("span",{children:"Confirmed"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded",style:{backgroundColor:p["in-progress"]}}),(0,a.jsx)("span",{children:"In Progress"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded",style:{backgroundColor:"#6B7280"}}),(0,a.jsx)("span",{children:"Completed"})]})]})]}),m?(0,a.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):(0,a.jsx)(o.Z,{ref:g,plugins:[l.Z,c.Z,d.ZP,u.Z],initialView:"dayGridMonth",headerToolbar:{left:"prev,next today",center:"title",right:""},events:v,eventClick:e=>{let t=e.event.extendedProps.appointment;s(t)},dateClick:e=>{r(new Date(e.dateStr))},editable:!0,droppable:!0,eventDrop:e=>{if(i){let t=e.event.extendedProps.appointment;i(t.id,e.event.start)}},slotMinTime:"08:00:00",slotMaxTime:"20:00:00",allDaySlot:!1,height:"auto",eventTimeFormat:{hour:"2-digit",minute:"2-digit",hour12:!0}})]})}var g=s(8723),x=s(8054),h=s(4649),v=s(3799),f=s(9542),b=s(2944),y=s(9216);function j(e){let{appointment:t,initialDate:s,onClose:r,onSave:o}=e,[l,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(""),[p,m]=(0,n.useState)((null==t?void 0:t.patientId)||""),[j,N]=(0,n.useState)((null==t?void 0:t.doctorId)||""),[w,S]=(0,n.useState)((null==t?void 0:t.departmentId)||""),[k,C]=(0,n.useState)((null==t?void 0:t.appointmentDate)||(null==s?void 0:s.toISOString().split("T")[0])||""),[I,D]=(0,n.useState)((null==t?void 0:t.startTime)||"09:00"),[A,P]=(0,n.useState)((null==t?void 0:t.duration)||30),[T,B]=(0,n.useState)((null==t?void 0:t.appointmentType)||"consultation"),[Z,R]=(0,n.useState)((null==t?void 0:t.reasonForVisit)||""),[_,z]=(0,n.useState)((null==t?void 0:t.notes)||""),[F,M]=(0,n.useState)([]),[E,O]=(0,n.useState)([]),[q,G]=(0,n.useState)([]),[L,W]=(0,n.useState)(""),[J,U]=(0,n.useState)(!1);(0,n.useEffect)(()=>{V()},[]);let V=async()=>{try{let[e,s,a]=await Promise.all([(0,y.ac)().get("/patients"),(0,y.ac)().get("/users"),(0,y.ac)().get("/departments")]);M(e.data||[]),O(s.data||[]),G(a.data||[]),t&&W("".concat(t.patientName," (").concat(t.patientId,")"))}catch(e){console.error("Error loading data:",e)}},X=async e=>{if(e.preventDefault(),!p||!j||!k||!I){u("Please fill in all required fields");return}c(!0),u("");try{let e={patientId:p,doctorId:j,departmentId:w||void 0,appointmentDate:k,startTime:I,duration:A,appointmentType:T,reasonForVisit:Z||void 0,notes:_||void 0};t?await i.q.update(t.id,e):await i.q.create(e),o(),r()}catch(e){var s,a;u((null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)||"Failed to save appointment")}finally{c(!1)}},H=F.filter(e=>"".concat(e.firstName," ").concat(e.lastName," ").concat(e.medicalRecordNumber).toLowerCase().includes(L.toLowerCase()));return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b sticky top-0 bg-white",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:t?"Edit Appointment":"New Appointment"}),(0,a.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(g.Z,{size:24})})]}),(0,a.jsxs)("form",{onSubmit:X,className:"p-6 space-y-6",children:[d&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:d}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Patient ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(x.Z,{className:"absolute left-3 top-3 text-gray-400",size:20}),(0,a.jsx)("input",{type:"text",placeholder:"Search patient by name or MRN...",value:L,onChange:e=>{W(e.target.value),U(!0)},onFocus:()=>U(!0),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),J&&L&&H.length>0&&(0,a.jsx)("div",{className:"mt-2 border rounded-lg max-h-40 overflow-y-auto bg-white shadow-lg absolute z-10 w-full max-w-xl",children:H.slice(0,10).map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>{m(e.id),W("".concat(e.firstName," ").concat(e.lastName," (").concat(e.medicalRecordNumber,")")),U(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-50 border-b last:border-b-0",children:[(0,a.jsxs)("div",{className:"font-medium",children:[e.firstName," ",e.lastName]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["MRN: ",e.medicalRecordNumber]})]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Doctor ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(h.Z,{className:"absolute left-3 top-3 text-gray-400",size:20}),(0,a.jsxs)("select",{value:j,onChange:e=>N(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select Doctor"}),E.map(e=>(0,a.jsxs)("option",{value:e.id,children:["Dr. ",e.firstName," ",e.lastName]},e.id))]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),(0,a.jsxs)("select",{value:w,onChange:e=>S(e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500",children:[(0,a.jsx)("option",{value:"",children:"Select Department (Optional)"}),q.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Date ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(v.Z,{className:"absolute left-3 top-3 text-gray-400",size:20}),(0,a.jsx)("input",{type:"date",value:k,onChange:e=>C(e.target.value),min:new Date().toISOString().split("T")[0],className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Time ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(f.Z,{className:"absolute left-3 top-3 text-gray-400",size:20}),(0,a.jsx)("input",{type:"time",value:I,onChange:e=>D(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (minutes)"}),(0,a.jsxs)("select",{value:A,onChange:e=>P(Number(e.target.value)),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500",children:[(0,a.jsx)("option",{value:15,children:"15 minutes"}),(0,a.jsx)("option",{value:30,children:"30 minutes"}),(0,a.jsx)("option",{value:45,children:"45 minutes"}),(0,a.jsx)("option",{value:60,children:"1 hour"}),(0,a.jsx)("option",{value:90,children:"1.5 hours"}),(0,a.jsx)("option",{value:120,children:"2 hours"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Appointment Type"}),(0,a.jsxs)("select",{value:T,onChange:e=>B(e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500",children:[(0,a.jsx)("option",{value:"consultation",children:"Consultation"}),(0,a.jsx)("option",{value:"follow-up",children:"Follow-up"}),(0,a.jsx)("option",{value:"emergency",children:"Emergency"}),(0,a.jsx)("option",{value:"routine-checkup",children:"Routine Checkup"}),(0,a.jsx)("option",{value:"procedure",children:"Procedure"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for Visit"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(b.Z,{className:"absolute left-3 top-3 text-gray-400",size:20}),(0,a.jsx)("textarea",{value:Z,onChange:e=>R(e.target.value),rows:2,placeholder:"Brief description of the reason for visit...",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes"}),(0,a.jsx)("textarea",{value:_,onChange:e=>z(e.target.value),rows:3,placeholder:"Any additional notes or special instructions...",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[(0,a.jsx)("button",{type:"button",onClick:r,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",disabled:l,children:"Cancel"}),(0,a.jsxs)("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50",disabled:l,children:[l?"Saving...":t?"Update":"Create"," Appointment"]})]})]})]})})}var N=s(5053),w=s(6139);let S=e=>{let{title:t,value:s,icon:n,color:r="indigo",trend:i}=e,o={indigo:"bg-indigo-500",blue:"bg-blue-500",green:"bg-green-500",purple:"bg-purple-500"};return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("div",{className:"".concat(o[r]||o.indigo," p-3 rounded-lg"),children:(0,a.jsx)(n,{className:"text-white",size:24})}),i&&(0,a.jsxs)("span",{className:"text-sm font-medium ".concat(i.isPositive?"text-green-600":"text-red-600"),children:[(i.isPositive,"")," ",Math.abs(i.value),"%"]})]}),(0,a.jsx)("h3",{className:"text-gray-600 text-sm font-medium",children:t}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:s})]})};function k(){let{user:e}=(0,r.t)(),[t,s]=(0,n.useState)([]),[o,l]=(0,n.useState)(!0),[c,d]=(0,n.useState)(!1),[u,p]=(0,n.useState)(),[g,x]=(0,n.useState)(),[h,f]=(0,n.useState)({});(0,n.useEffect)(()=>{e&&b()},[e,h]);let b=async()=>{try{l(!0);let e=await i.q.getAll(h);s(e.data||[])}catch(e){console.error("Error loading appointments:",e)}finally{l(!1)}},y=t.filter(e=>e.appointmentDate===new Date().toISOString().split("T")[0]).length,k=t.filter(e=>"scheduled"===e.status).length,C=t.filter(e=>"completed"===e.status).length;return(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Appointments"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Schedule and manage patient appointments"})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:[(0,a.jsx)(N.Z,{size:20}),"Refresh"]}),(0,a.jsxs)("button",{onClick:()=>{p(void 0),x(void 0),d(!0)},className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:[(0,a.jsx)(w.Z,{size:20}),"New Appointment"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[(0,a.jsx)(S,{title:"Today's Appointments",value:y,icon:v.Z,trend:{value:0,isPositive:!0}}),(0,a.jsx)(S,{title:"Scheduled",value:k,icon:v.Z,color:"blue"}),(0,a.jsx)(S,{title:"Completed",value:C,icon:v.Z,color:"green"}),(0,a.jsx)(S,{title:"Total",value:t.length,icon:v.Z,color:"purple"})]}),(0,a.jsx)(m,{appointments:t,onEventClick:e=>{p(e),d(!0)},onDateClick:e=>{x(e),p(void 0),d(!0)},loading:o}),c&&(0,a.jsx)(j,{appointment:u,initialDate:g,onClose:()=>{d(!1),p(void 0),x(void 0)},onSave:()=>{b()}})]})}},9216:function(e,t,s){"use strict";let a;s.d(t,{Di:function(){return l},J2:function(){return m},WU:function(){return g},ac:function(){return o},g8:function(){return u},h0:function(){return p},h5:function(){return c},iJ:function(){return d},qN:function(){return i},sl:function(){return x}});var n=s(6470),r=s(3966);s(2189);let i=()=>((a=n.Z.create({baseURL:"http://localhost:5073/api",headers:{"Content-Type":"application/json"}})).interceptors.request.use(e=>{let{tenantId:t,token:s}=r.t.getState();return t&&(e.headers["X-Tenant-ID"]=t),s&&(e.headers.Authorization="Bearer ".concat(s)),e}),a.interceptors.response.use(e=>e,e=>{var t,s;return(null===(t=e.response)||void 0===t?void 0:t.status)===401?(r.t.getState().logout(),window.location.href="/auth/login"):(null===(s=e.response)||void 0===s?void 0:s.status)===403&&(window.location.href="/dashboard/unauthorized"),Promise.reject(e)}),a),o=()=>a||i(),l={getAll:()=>o().get("/patients"),getById:e=>o().get("/patients/".concat(e)),create:e=>o().post("/patients",e),update:(e,t)=>o().put("/patients/".concat(e),t),delete:e=>o().delete("/patients/".concat(e))},c={getAll:()=>o().get("/examinations"),getById:e=>o().get("/examinations/".concat(e)),getByPatient:e=>o().get("/examinations/patient/".concat(e)),create:e=>o().post("/examinations",e),update:(e,t)=>o().put("/examinations/".concat(e),t),delete:e=>o().delete("/examinations/".concat(e))},d={login:(e,t,s)=>o().post("/auth/login",{email:e,password:t,tenantId:s}),changePassword:(e,t)=>o().post("/auth/change-password",{currentPassword:e,newPassword:t})},u={getAll:()=>o().get("/users"),getAllWithDetails:()=>o().get("/users/with-details"),getById:e=>o().get("/users/".concat(e)),create:e=>o().post("/users",e),update:(e,t)=>o().put("/users/".concat(e),t),deactivate:e=>o().post("/users/".concat(e,"/deactivate"))},p={getAll:()=>o().get("/roles"),getAllWithUserCount:()=>o().get("/roles/with-user-count"),getById:e=>o().get("/roles/".concat(e)),create:e=>o().post("/roles",e),update:(e,t)=>o().put("/roles/".concat(e),t),delete:e=>o().delete("/roles/".concat(e)),assignRole:(e,t,s)=>o().post("/users/".concat(e,"/roles"),{roleId:t,branchId:s}),getRolePermissions:e=>o().get("/roles/".concat(e,"/permissions")),assignPermissions:(e,t)=>o().post("/roles/".concat(e,"/permissions"),{permissionIds:t}),removePermissions:(e,t)=>o().delete("/roles/".concat(e,"/permissions"),{data:{permissionIds:t}}),cloneRole:(e,t,s)=>o().post("/roles/".concat(e,"/clone"),{name:t,description:s})},m={getAll:()=>o().get("/permissions"),getAllGrouped:()=>o().get("/permissions/grouped"),getById:e=>o().get("/permissions/".concat(e)),create:e=>o().post("/permissions",e),update:(e,t)=>o().put("/permissions/".concat(e),t),delete:e=>o().delete("/permissions/".concat(e)),getByCategory:e=>o().get("/permissions/category/".concat(e)),bulkAssign:(e,t)=>o().post("/permissions/bulk-assign",{roleId:e,permissionIds:t}),bulkRemove:(e,t)=>o().delete("/permissions/bulk-remove",{data:{roleId:e,permissionIds:t}}),getMatrix:()=>o().get("/permissions/matrix"),getStatistics:()=>o().get("/permissions/statistics")},g={getAll:()=>o().get("/departments"),getAllWithStaffCount:()=>o().get("/departments/with-staff-count"),getById:e=>o().get("/departments/".concat(e))},x={getAll:()=>o().get("/branches")}},4182:function(e,t,s){"use strict";s.d(t,{q:function(){return n}});var a=s(9216);let n={getAll:async e=>{let t=new URLSearchParams;return(null==e?void 0:e.startDate)&&t.append("startDate",e.startDate),(null==e?void 0:e.endDate)&&t.append("endDate",e.endDate),(null==e?void 0:e.doctorId)&&t.append("doctorId",e.doctorId),(null==e?void 0:e.patientId)&&t.append("patientId",e.patientId),(null==e?void 0:e.departmentId)&&t.append("departmentId",e.departmentId),(null==e?void 0:e.status)&&t.append("status",e.status),(0,a.ac)().get("/appointments?".concat(t.toString()))},getById:async e=>(0,a.ac)().get("/appointments/".concat(e)),create:async e=>(0,a.ac)().post("/appointments",e),update:async(e,t)=>(0,a.ac)().put("/appointments/".concat(e),t),cancel:async e=>(0,a.ac)().delete("/appointments/".concat(e)),updateStatus:async(e,t)=>(0,a.ac)().put("/appointments/".concat(e,"/status"),{status:t}),getCalendarData:async(e,t)=>(0,a.ac)().get("/appointments/calendar?startDate=".concat(e,"&endDate=").concat(t)),checkAvailability:async(e,t,s,n)=>(0,a.ac)().get("/appointments/availability?doctorId=".concat(e,"&date=").concat(t,"&startTime=").concat(s,"&duration=").concat(n))}},2189:function(e,t,s){"use strict";s.d(t,{f:function(){return n}});var a=s(9216);let n={assign:async function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,a.ac)().post("/users/".concat(e,"/department-access"),{departmentId:t,accessLevel:s,isPrimary:n})},revoke:async(e,t)=>(0,a.ac)().delete("/users/".concat(e,"/department-access/").concat(t)),getUserDepartments:async e=>{let t=await (0,a.ac)().get("/users/".concat(e,"/department-access"));return t.data},getDepartmentUsers:async e=>(0,a.ac)().get("/departments/".concat(e,"/user-access")),updateAccessLevel:async(e,t,s)=>(0,a.ac)().put("/users/".concat(e,"/department-access/").concat(t),{accessLevel:s}),setPrimary:async(e,t)=>(0,a.ac)().put("/users/".concat(e,"/department-access/").concat(t),{isPrimary:!0}),bulkAssign:async e=>(0,a.ac)().post("/user-department-access/bulk-assign",{assignments:e}),getAccessMatrix:async e=>{let t=e?{departmentId:e}:{};return(0,a.ac)().get("/user-department-access/matrix",{params:t})}}},3966:function(e,t,s){"use strict";s.d(t,{R:function(){return r},t:function(){return n}});var a=s(9147);let n=(0,a.Ue)((e,t)=>({user:null,token:null,refreshToken:null,tenantId:null,roles:[],permissions:[],isLoading:!1,mustChangePassword:!1,setAuth:(t,s,a,n,r,i,o)=>{e({token:t,refreshToken:s,user:a,roles:n,permissions:r,tenantId:i,mustChangePassword:o}),localStorage.setItem("auth_token",t),localStorage.setItem("refresh_token",s),localStorage.setItem("user",JSON.stringify(a)),localStorage.setItem("roles",JSON.stringify(n)),localStorage.setItem("permissions",JSON.stringify(r)),localStorage.setItem("tenant_id",i)},logout:()=>{e({user:null,token:null,refreshToken:null,tenantId:null,roles:[],permissions:[],mustChangePassword:!1}),localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),localStorage.removeItem("roles"),localStorage.removeItem("permissions"),localStorage.removeItem("tenant_id")},clearMustChangePassword:()=>e({mustChangePassword:!1}),hasPermission:e=>{let{permissions:s}=t();return!!(s&&Array.isArray(s))&&(!!s.includes("*")||s.includes(e))},hasRole:e=>{let{roles:s}=t();return!!(s&&Array.isArray(s))&&s.includes(e)}}));function r(){try{let e=localStorage.getItem("auth_token"),t=localStorage.getItem("refresh_token"),s=localStorage.getItem("user"),a=localStorage.getItem("roles"),r=localStorage.getItem("permissions"),i=localStorage.getItem("tenant_id");if(e&&s){let o=JSON.parse(s),l=a?JSON.parse(a):[],c=r?JSON.parse(r):[];n.getState().setAuth(e,t||null,o,l,c,i||null,n.getState().mustChangePassword)}}catch(e){console.warn("Failed to hydrate auth from storage",e)}}}},function(e){e.O(0,[340,675,899,510,662,744],function(){return e(e.s=1546)}),_N_E=e.O()}]);