(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{1757:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(2317);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=(...e)=>e.filter((e,t,s)=>!!e&&s.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,a.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:o="",children:i,iconNode:l,...d},m)=>(0,a.createElement)("svg",{ref:m,...c,width:t,height:t,stroke:e,strokeWidth:n?24*Number(s)/Number(t):s,className:r("lucide",o),...d},[...l.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(i)?i:[i]])),i=(e,t)=>{let s=(0,a.forwardRef)(({className:s,...c},i)=>(0,a.createElement)(o,{ref:i,iconNode:t,className:r(`lucide-${n(e)}`,s),...c}));return s.displayName=`${e}`,s}},9542:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(1757);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,a.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8054:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(1757);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,a.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},7934:function(e,t,s){Promise.resolve().then(s.bind(s,8830))},8830:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var a=s(5650),n=s(3966),r=s(9856),c=s(2317),o=s(8054),i=s(9542),l=s(4182),d=s(9216);let m=e=>{let t={scheduled:"bg-blue-100 text-blue-800 border-blue-200",confirmed:"bg-green-100 text-green-800 border-green-200","in-progress":"bg-yellow-100 text-yellow-800 border-yellow-200",completed:"bg-gray-100 text-gray-800 border-gray-200",cancelled:"bg-red-100 text-red-800 border-red-200","no-show":"bg-red-200 text-red-900 border-red-300"};return t[e]||t.scheduled};function u(e){let{doctorId:t,date:s=new Date}=e,[n,r]=(0,c.useState)([]),[i,m]=(0,c.useState)(null),[u,x]=(0,c.useState)(!0),[h,y]=(0,c.useState)(s),[f,v]=(0,c.useState)("day");(0,c.useEffect)(()=>{t&&(N(),j())},[t,h]);let N=async()=>{try{let e=await (0,d.ac)().get("/users/".concat(t));m(e.data)}catch(e){console.error("Error loading doctor data:",e)}},j=async()=>{try{x(!0);let e={doctorId:t,startDate:h.toISOString().split("T")[0],endDate:"week"===f?new Date(h.getTime()+6048e5).toISOString().split("T")[0]:h.toISOString().split("T")[0]},s=await l.q.getAll(e);r(s.data||[])}catch(e){console.error("Error loading appointments:",e)}finally{x(!1)}},b=()=>{let e=[],t=new Date(h);t.setDate(h.getDate()-h.getDay());for(let s=0;s<7;s++){let a=new Date(t);a.setDate(t.getDate()+s),e.push(a)}return e},w=e=>{let t=new Date(h);"day"===f?t.setDate(h.getDate()+("next"===e?1:-1)):t.setDate(h.getDate()+("next"===e?7:-7)),y(t)};return t?(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(o.Z,{className:"w-6 h-6 text-indigo-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:i?"Dr. ".concat(i.firstName," ").concat(i.lastName):"Loading..."}),(null==i?void 0:i.specialization)&&(0,a.jsx)("p",{className:"text-sm text-gray-600",children:i.specialization}),(null==i?void 0:i.departmentName)&&(0,a.jsx)("p",{className:"text-xs text-gray-500",children:i.departmentName})]})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>v("day"),className:"px-3 py-1 text-sm rounded ".concat("day"===f?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Day"}),(0,a.jsx)("button",{onClick:()=>v("week"),className:"px-3 py-1 text-sm rounded ".concat("week"===f?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Week"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>w("prev"),className:"p-2 text-gray-400 hover:text-gray-600",children:"‹"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900 min-w-[120px] text-center",children:"day"===f?h.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}):"".concat(b()[0].toLocaleDateString("en-US",{month:"short",day:"numeric"})," - ").concat(b()[6].toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}))}),(0,a.jsx)("button",{onClick:()=>w("next"),className:"p-2 text-gray-400 hover:text-gray-600",children:"›"})]})]})]})}),(0,a.jsx)("div",{className:"p-6",children:u?(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"}),(0,a.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading schedule..."})]}):"day"===f?(0,a.jsx)(p,{appointments:(e=>{let t=e.toISOString().split("T")[0];return n.filter(e=>e.appointmentDate===t).sort((e,t)=>e.startTime.localeCompare(t.startTime))})(h)}):(0,a.jsx)(g,{appointments:n,weekDays:b()})})]}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(o.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No Doctor Selected"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Please select a doctor to view their schedule."})]})}function p(e){let{appointments:t}=e,s=[];for(let e=8;e<=18;e++)for(let t=0;t<60;t+=30)s.push("".concat(e.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0")));return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Daily Schedule"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[t.length," appointment",1!==t.length?"s":""," today"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-2",children:s.map((e,s)=>{let n=t.find(t=>t.startTime===e);if(void 0!==n){let t=n.duration;return(0,a.jsx)("div",{className:"p-4 rounded-lg border-2 ".concat(m(n.status)),style:{gridRow:"span ".concat(Math.ceil(t/30))},children:(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(i.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{className:"font-medium",children:[x(n.startTime)," - ",x(n.endTime)]}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full capitalize ".concat(m(n.status)),children:n.status})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:n.patientName}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:n.appointmentType}),n.reasonForVisit&&(0,a.jsx)("p",{className:"text-sm text-gray-500",children:n.reasonForVisit})]})]})})},e)}return s%2==0?(0,a.jsx)("div",{className:"p-4 border border-gray-100 rounded-lg bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-400",children:[(0,a.jsx)(i.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:x(e)})]})},e):null})})]})}function g(e){let{appointments:t,weekDays:s}=e;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Weekly Schedule"}),(0,a.jsxs)("div",{className:"grid grid-cols-8 gap-2",children:[(0,a.jsx)("div",{className:"p-2"}),s.map((e,t)=>(0,a.jsxs)("div",{className:"p-2 text-center",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.toLocaleDateString("en-US",{weekday:"short"})}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.getDate()})]},t)),Array.from({length:24},(e,n)=>(0,a.jsxs)("div",{className:"contents",children:[(0,a.jsx)("div",{className:"p-2 text-right text-xs text-gray-500 border-t",children:0===n?"12 AM":n<12?"".concat(n," AM"):12===n?"12 PM":"".concat(n-12," PM")}),s.map((e,s)=>{let r=t.filter(t=>t.appointmentDate===e.toISOString().split("T")[0]&&parseInt(t.startTime.split(":")[0])===n);return(0,a.jsx)("div",{className:"min-h-[60px] p-1 border-t border-l",children:r.map((e,t)=>(0,a.jsxs)("div",{className:"p-2 mb-1 text-xs rounded ".concat(m(e.status)," cursor-pointer hover:opacity-80"),title:"".concat(e.patientName," - ").concat(e.appointmentType),children:[(0,a.jsx)("div",{className:"font-medium truncate",children:e.patientName}),(0,a.jsx)("div",{className:"text-xs opacity-75",children:x(e.startTime)})]},t))},s)})]},n))]})]})}function x(e){let[t,s]=e.split(":"),a=parseInt(t);return"".concat(a%12||12,":").concat(s," ").concat(a>=12?"PM":"AM")}function h(){let{user:e}=(0,n.t)(),t=(0,r.useRouter)(),[s,o]=(0,c.useState)("");return((0,c.useEffect)(()=>{e&&("doctor"===e.userType||"Doctor"===e.userType)&&o(e.id)},[e]),e)?"doctor"===e.userType||"Doctor"===e.userType||s?(0,a.jsx)("div",{className:"p-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Doctor Schedule"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"doctor"===e.userType||"Doctor"===e.userType?"View and manage your appointments":"View doctor schedules and appointments"})]}),(0,a.jsx)(u,{doctorId:s})]})}):(0,a.jsx)("div",{className:"p-8",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Doctor Schedule"}),(0,a.jsx)("p",{className:"text-gray-600 mb-8",children:"Select a doctor to view their schedule"}),(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[(0,a.jsx)("p",{className:"text-yellow-800",children:"Doctor selection interface will be implemented here. For now, please navigate to the appointments calendar to view schedules."}),(0,a.jsx)("button",{onClick:()=>t.push("/dashboard/appointments"),className:"mt-4 bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700",children:"Go to Appointments Calendar"})]})]})})}):(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})})}},9216:function(e,t,s){"use strict";let a;s.d(t,{Di:function(){return i},J2:function(){return p},WU:function(){return g},ac:function(){return o},g8:function(){return m},h0:function(){return u},h5:function(){return l},iJ:function(){return d},qN:function(){return c},sl:function(){return x}});var n=s(6470),r=s(3966);s(2189);let c=()=>((a=n.Z.create({baseURL:"http://localhost:5073/api",headers:{"Content-Type":"application/json"}})).interceptors.request.use(e=>{let{tenantId:t,token:s}=r.t.getState();return t&&(e.headers["X-Tenant-ID"]=t),s&&(e.headers.Authorization="Bearer ".concat(s)),e}),a.interceptors.response.use(e=>e,e=>{var t,s;return(null===(t=e.response)||void 0===t?void 0:t.status)===401?(r.t.getState().logout(),window.location.href="/auth/login"):(null===(s=e.response)||void 0===s?void 0:s.status)===403&&(window.location.href="/dashboard/unauthorized"),Promise.reject(e)}),a),o=()=>a||c(),i={getAll:()=>o().get("/patients"),getById:e=>o().get("/patients/".concat(e)),create:e=>o().post("/patients",e),update:(e,t)=>o().put("/patients/".concat(e),t),delete:e=>o().delete("/patients/".concat(e))},l={getAll:()=>o().get("/examinations"),getById:e=>o().get("/examinations/".concat(e)),getByPatient:e=>o().get("/examinations/patient/".concat(e)),create:e=>o().post("/examinations",e),update:(e,t)=>o().put("/examinations/".concat(e),t),delete:e=>o().delete("/examinations/".concat(e))},d={login:(e,t,s)=>o().post("/auth/login",{email:e,password:t,tenantId:s}),changePassword:(e,t)=>o().post("/auth/change-password",{currentPassword:e,newPassword:t})},m={getAll:()=>o().get("/users"),getAllWithDetails:()=>o().get("/users/with-details"),getById:e=>o().get("/users/".concat(e)),create:e=>o().post("/users",e),update:(e,t)=>o().put("/users/".concat(e),t),deactivate:e=>o().post("/users/".concat(e,"/deactivate"))},u={getAll:()=>o().get("/roles"),getAllWithUserCount:()=>o().get("/roles/with-user-count"),getById:e=>o().get("/roles/".concat(e)),create:e=>o().post("/roles",e),update:(e,t)=>o().put("/roles/".concat(e),t),delete:e=>o().delete("/roles/".concat(e)),assignRole:(e,t,s)=>o().post("/users/".concat(e,"/roles"),{roleId:t,branchId:s}),getRolePermissions:e=>o().get("/roles/".concat(e,"/permissions")),assignPermissions:(e,t)=>o().post("/roles/".concat(e,"/permissions"),{permissionIds:t}),removePermissions:(e,t)=>o().delete("/roles/".concat(e,"/permissions"),{data:{permissionIds:t}}),cloneRole:(e,t,s)=>o().post("/roles/".concat(e,"/clone"),{name:t,description:s})},p={getAll:()=>o().get("/permissions"),getAllGrouped:()=>o().get("/permissions/grouped"),getById:e=>o().get("/permissions/".concat(e)),create:e=>o().post("/permissions",e),update:(e,t)=>o().put("/permissions/".concat(e),t),delete:e=>o().delete("/permissions/".concat(e)),getByCategory:e=>o().get("/permissions/category/".concat(e)),bulkAssign:(e,t)=>o().post("/permissions/bulk-assign",{roleId:e,permissionIds:t}),bulkRemove:(e,t)=>o().delete("/permissions/bulk-remove",{data:{roleId:e,permissionIds:t}}),getMatrix:()=>o().get("/permissions/matrix"),getStatistics:()=>o().get("/permissions/statistics")},g={getAll:()=>o().get("/departments"),getAllWithStaffCount:()=>o().get("/departments/with-staff-count"),getById:e=>o().get("/departments/".concat(e))},x={getAll:()=>o().get("/branches")}},4182:function(e,t,s){"use strict";s.d(t,{q:function(){return n}});var a=s(9216);let n={getAll:async e=>{let t=new URLSearchParams;return(null==e?void 0:e.startDate)&&t.append("startDate",e.startDate),(null==e?void 0:e.endDate)&&t.append("endDate",e.endDate),(null==e?void 0:e.doctorId)&&t.append("doctorId",e.doctorId),(null==e?void 0:e.patientId)&&t.append("patientId",e.patientId),(null==e?void 0:e.departmentId)&&t.append("departmentId",e.departmentId),(null==e?void 0:e.status)&&t.append("status",e.status),(0,a.ac)().get("/appointments?".concat(t.toString()))},getById:async e=>(0,a.ac)().get("/appointments/".concat(e)),create:async e=>(0,a.ac)().post("/appointments",e),update:async(e,t)=>(0,a.ac)().put("/appointments/".concat(e),t),cancel:async e=>(0,a.ac)().delete("/appointments/".concat(e)),updateStatus:async(e,t)=>(0,a.ac)().put("/appointments/".concat(e,"/status"),{status:t}),getCalendarData:async(e,t)=>(0,a.ac)().get("/appointments/calendar?startDate=".concat(e,"&endDate=").concat(t)),checkAvailability:async(e,t,s,n)=>(0,a.ac)().get("/appointments/availability?doctorId=".concat(e,"&date=").concat(t,"&startTime=").concat(s,"&duration=").concat(n))}},2189:function(e,t,s){"use strict";s.d(t,{f:function(){return n}});var a=s(9216);let n={assign:async function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,a.ac)().post("/users/".concat(e,"/department-access"),{departmentId:t,accessLevel:s,isPrimary:n})},revoke:async(e,t)=>(0,a.ac)().delete("/users/".concat(e,"/department-access/").concat(t)),getUserDepartments:async e=>{let t=await (0,a.ac)().get("/users/".concat(e,"/department-access"));return t.data},getDepartmentUsers:async e=>(0,a.ac)().get("/departments/".concat(e,"/user-access")),updateAccessLevel:async(e,t,s)=>(0,a.ac)().put("/users/".concat(e,"/department-access/").concat(t),{accessLevel:s}),setPrimary:async(e,t)=>(0,a.ac)().put("/users/".concat(e,"/department-access/").concat(t),{isPrimary:!0}),bulkAssign:async e=>(0,a.ac)().post("/user-department-access/bulk-assign",{assignments:e}),getAccessMatrix:async e=>{let t=e?{departmentId:e}:{};return(0,a.ac)().get("/user-department-access/matrix",{params:t})}}},3966:function(e,t,s){"use strict";s.d(t,{R:function(){return r},t:function(){return n}});var a=s(9147);let n=(0,a.Ue)((e,t)=>({user:null,token:null,refreshToken:null,tenantId:null,roles:[],permissions:[],isLoading:!1,mustChangePassword:!1,setAuth:(t,s,a,n,r,c,o)=>{e({token:t,refreshToken:s,user:a,roles:n,permissions:r,tenantId:c,mustChangePassword:o}),localStorage.setItem("auth_token",t),localStorage.setItem("refresh_token",s),localStorage.setItem("user",JSON.stringify(a)),localStorage.setItem("roles",JSON.stringify(n)),localStorage.setItem("permissions",JSON.stringify(r)),localStorage.setItem("tenant_id",c)},logout:()=>{e({user:null,token:null,refreshToken:null,tenantId:null,roles:[],permissions:[],mustChangePassword:!1}),localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),localStorage.removeItem("roles"),localStorage.removeItem("permissions"),localStorage.removeItem("tenant_id")},clearMustChangePassword:()=>e({mustChangePassword:!1}),hasPermission:e=>{let{permissions:s}=t();return!!(s&&Array.isArray(s))&&(!!s.includes("*")||s.includes(e))},hasRole:e=>{let{roles:s}=t();return!!(s&&Array.isArray(s))&&s.includes(e)}}));function r(){try{let e=localStorage.getItem("auth_token"),t=localStorage.getItem("refresh_token"),s=localStorage.getItem("user"),a=localStorage.getItem("roles"),r=localStorage.getItem("permissions"),c=localStorage.getItem("tenant_id");if(e&&s){let o=JSON.parse(s),i=a?JSON.parse(a):[],l=r?JSON.parse(r):[];n.getState().setAuth(e,t||null,o,i,l,c||null,n.getState().mustChangePassword)}}catch(e){console.warn("Failed to hydrate auth from storage",e)}}},9856:function(e,t,s){e.exports=s(39)}},function(e){e.O(0,[675,510,662,744],function(){return e(e.s=7934)}),_N_E=e.O()}]);