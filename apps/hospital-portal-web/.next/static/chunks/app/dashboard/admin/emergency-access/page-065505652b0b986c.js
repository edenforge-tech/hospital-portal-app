(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[825],{1757:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(2317);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=(...e)=>e.filter((e,t,s)=>!!e&&s.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,a.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:i="",children:l,iconNode:o,...d},u)=>(0,a.createElement)("svg",{ref:u,...c,width:t,height:t,stroke:e,strokeWidth:r?24*Number(s)/Number(t):s,className:n("lucide",i),...d},[...o.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(l)?l:[l]])),l=(e,t)=>{let s=(0,a.forwardRef)(({className:s,...c},l)=>(0,a.createElement)(i,{ref:l,iconNode:t,className:n(`lucide-${r(e)}`,s),...c}));return s.displayName=`${e}`,s}},5924:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(1757);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},53:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(1757);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},9542:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(1757);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},3452:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(1757);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},1601:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(1757);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},547:function(e,t,s){Promise.resolve().then(s.bind(s,1625))},1625:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var a=s(5650),r=s(2317),n=s(3966),c=s(9216);let i={request:async e=>(0,c.ac)().post("/emergency-access/request",e),getMyRequests:async()=>(0,c.ac)().get("/emergency-access/my-requests"),getPendingApprovals:async()=>(0,c.ac)().get("/emergency-access/pending-approvals"),getActive:async e=>{let t=e?"/emergency-access/active?userId=".concat(e):"/emergency-access/active";return(0,c.ac)().get(t)},approve:async(e,t)=>(0,c.ac)().post("/emergency-access/".concat(e,"/approve"),t),reject:async(e,t)=>(0,c.ac)().post("/emergency-access/".concat(e,"/reject"),t),revoke:async(e,t)=>(0,c.ac)().post("/emergency-access/".concat(e,"/revoke"),{reason:t}),getById:async e=>(0,c.ac)().get("/emergency-access/".concat(e)),getHistory:async e=>{let t=e?"/emergency-access/history?userId=".concat(e):"/emergency-access/history";return(0,c.ac)().get(t)}};var l=s(5924),o=s(53),d=s(9542),u=s(1601),m=s(3452),g=s(1757);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let p=(0,g.Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);function x(){let{user:e}=(0,n.t)(),[t,s]=(0,r.useState)([]),[c,g]=(0,r.useState)([]),[x,h]=(0,r.useState)([]),[y,v]=(0,r.useState)(!0),[f,j]=(0,r.useState)(null),[b,N]=(0,r.useState)(null),[w,k]=(0,r.useState)(!1),[S,A]=(0,r.useState)({reason:"",emergencyType:"Medical",patientId:void 0,durationMinutes:60,grantedPermissions:["patient.view","patient.edit"],scope:"Limited"});(0,r.useEffect)(()=>{e&&C()},[e]);let C=async()=>{try{v(!0),j(null);let[e,t,a]=await Promise.all([i.getMyRequests(),i.getPendingApprovals().catch(()=>({data:[]})),i.getActive()]);s(e.data||[]),g(t.data||[]),h(a.data||[])}catch(s){var e,t;console.error("Error loading emergency access data:",s),j((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Failed to load data")}finally{v(!1)}},I=async e=>{if(e.preventDefault(),!S.reason.trim()){j("Reason is required");return}try{j(null),N(null),await i.request(S),N("Emergency access requested successfully"),k(!1),A({reason:"",emergencyType:"Medical",patientId:void 0,durationMinutes:60,grantedPermissions:["patient.view","patient.edit"],scope:"Limited"}),await C()}catch(e){var t,s;j((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Failed to request emergency access")}},R=async e=>{let t=prompt("Enter approval notes (optional):");try{j(null),N(null),await i.approve(e,{notes:t||void 0}),N("Emergency access approved successfully"),await C()}catch(e){var s,a;j((null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)||"Failed to approve emergency access")}},q=async e=>{let t=prompt("Enter rejection reason:");if(t)try{j(null),N(null),await i.reject(e,{reason:t}),N("Emergency access rejected successfully"),await C()}catch(e){var s,a;j((null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)||"Failed to reject emergency access")}},E=async e=>{let t=prompt("Enter revocation reason:");if(t)try{j(null),N(null),await i.revoke(e,t),N("Emergency access revoked successfully"),await C()}catch(e){var s,a;j((null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)||"Failed to revoke emergency access")}},M=e=>{let t={pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",active:"bg-blue-100 text-blue-800",expired:"bg-gray-100 text-gray-800",revoked:"bg-red-100 text-red-800",rejected:"bg-red-100 text-red-800"};return t[e]||t.pending},P=e=>{switch(e){case"approved":case"active":return(0,a.jsx)(l.Z,{className:"text-green-600",size:20});case"rejected":case"revoked":return(0,a.jsx)(o.Z,{className:"text-red-600",size:20});case"pending":return(0,a.jsx)(d.Z,{className:"text-yellow-600",size:20});default:return(0,a.jsx)(u.Z,{className:"text-gray-600",size:20})}};return y?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center space-x-2",children:[(0,a.jsx)(m.Z,{size:32,className:"text-red-600"}),(0,a.jsx)("span",{children:"Emergency Access"})]}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Request and manage emergency access to protected resources"})]}),(0,a.jsxs)("button",{onClick:()=>k(!w),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium flex items-center space-x-2",children:[(0,a.jsx)(u.Z,{size:18}),(0,a.jsx)("span",{children:"Request Emergency Access"})]})]}),f&&(0,a.jsx)("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:f}),b&&(0,a.jsx)("div",{className:"mb-4 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded",children:b}),w&&(0,a.jsxs)("div",{className:"mb-8 bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Request Emergency Access"}),(0,a.jsxs)("form",{onSubmit:I,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Emergency Type"}),(0,a.jsxs)("select",{value:S.emergencyType,onChange:e=>A({...S,emergencyType:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"Medical",children:"Medical Emergency"}),(0,a.jsx)("option",{value:"LifeThreatening",children:"Life-Threatening"}),(0,a.jsx)("option",{value:"Critical",children:"Critical Care"}),(0,a.jsx)("option",{value:"Urgent",children:"Urgent"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Reason for Request ",(0,a.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,a.jsx)("textarea",{value:S.reason,onChange:e=>A({...S,reason:e.target.value}),rows:4,placeholder:"Describe the emergency situation and why access is needed...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes)"}),(0,a.jsx)("input",{type:"number",value:S.durationMinutes,onChange:e=>A({...S,durationMinutes:parseInt(e.target.value)}),min:"15",max:"240",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Access Scope"}),(0,a.jsxs)("select",{value:S.scope,onChange:e=>A({...S,scope:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"Limited",children:"Limited"}),(0,a.jsx)("option",{value:"Full",children:"Full"}),(0,a.jsx)("option",{value:"Specific",children:"Specific"})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>k(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Submit Request"})]})]})]}),x.length>0&&(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[(0,a.jsx)(p,{className:"text-blue-600",size:20}),(0,a.jsx)("span",{children:"Active Emergency Access"})]}),(0,a.jsx)("div",{className:"grid gap-4",children:x.map(e=>(0,a.jsxs)("div",{className:"bg-blue-50 border-2 border-blue-300 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:e.emergencyType}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.reason})]}),(0,a.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat(M(e.status)),children:e.status})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Code:"})," ",e.accessCode||"N/A"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Scope:"})," ",e.scope]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Expires:"})," ",new Date(e.endTime).toLocaleString()]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Duration:"})," ",e.durationMinutes," minutes"]})]}),(0,a.jsx)("button",{onClick:()=>E(e.id),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 text-sm",children:"Revoke Access"})]},e.id))})]}),c.length>0&&(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Pending Approvals"}),(0,a.jsx)("div",{className:"space-y-4",children:c.map(e=>(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-300 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:e.emergencyType}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.reason})]}),P(e.status)]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm text-gray-600 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Requested:"})," ",new Date(e.startTime).toLocaleString()]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Duration:"})," ",e.durationMinutes," minutes"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Scope:"})," ",e.scope]})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{onClick:()=>R(e.id),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 text-sm",children:"Approve"}),(0,a.jsx)("button",{onClick:()=>q(e.id),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 text-sm",children:"Reject"})]})]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"My Requests"}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Reason"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Requested"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Duration"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.emergencyType}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.reason}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.startTime).toLocaleString()}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.durationMinutes," min"]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(M(e.status)),children:e.status})})]},e.id))})]})})]})]})}},9216:function(e,t,s){"use strict";let a;s.d(t,{Di:function(){return l},J2:function(){return g},WU:function(){return p},ac:function(){return i},g8:function(){return u},h0:function(){return m},h5:function(){return o},iJ:function(){return d},qN:function(){return c},sl:function(){return x}});var r=s(6470),n=s(3966);s(2189);let c=()=>((a=r.Z.create({baseURL:"http://localhost:5073/api",headers:{"Content-Type":"application/json"}})).interceptors.request.use(e=>{let{tenantId:t,token:s}=n.t.getState();return t&&(e.headers["X-Tenant-ID"]=t),s&&(e.headers.Authorization="Bearer ".concat(s)),e}),a.interceptors.response.use(e=>e,e=>{var t,s;return(null===(t=e.response)||void 0===t?void 0:t.status)===401?(n.t.getState().logout(),window.location.href="/auth/login"):(null===(s=e.response)||void 0===s?void 0:s.status)===403&&(window.location.href="/dashboard/unauthorized"),Promise.reject(e)}),a),i=()=>a||c(),l={getAll:()=>i().get("/patients"),getById:e=>i().get("/patients/".concat(e)),create:e=>i().post("/patients",e),update:(e,t)=>i().put("/patients/".concat(e),t),delete:e=>i().delete("/patients/".concat(e))},o={getAll:()=>i().get("/examinations"),getById:e=>i().get("/examinations/".concat(e)),getByPatient:e=>i().get("/examinations/patient/".concat(e)),create:e=>i().post("/examinations",e),update:(e,t)=>i().put("/examinations/".concat(e),t),delete:e=>i().delete("/examinations/".concat(e))},d={login:(e,t,s)=>i().post("/auth/login",{email:e,password:t,tenantId:s}),changePassword:(e,t)=>i().post("/auth/change-password",{currentPassword:e,newPassword:t})},u={getAll:()=>i().get("/users"),getAllWithDetails:()=>i().get("/users/with-details"),getById:e=>i().get("/users/".concat(e)),create:e=>i().post("/users",e),update:(e,t)=>i().put("/users/".concat(e),t),deactivate:e=>i().post("/users/".concat(e,"/deactivate"))},m={getAll:()=>i().get("/roles"),getAllWithUserCount:()=>i().get("/roles/with-user-count"),getById:e=>i().get("/roles/".concat(e)),create:e=>i().post("/roles",e),update:(e,t)=>i().put("/roles/".concat(e),t),delete:e=>i().delete("/roles/".concat(e)),assignRole:(e,t,s)=>i().post("/users/".concat(e,"/roles"),{roleId:t,branchId:s}),getRolePermissions:e=>i().get("/roles/".concat(e,"/permissions")),assignPermissions:(e,t)=>i().post("/roles/".concat(e,"/permissions"),{permissionIds:t}),removePermissions:(e,t)=>i().delete("/roles/".concat(e,"/permissions"),{data:{permissionIds:t}}),cloneRole:(e,t,s)=>i().post("/roles/".concat(e,"/clone"),{name:t,description:s})},g={getAll:()=>i().get("/permissions"),getAllGrouped:()=>i().get("/permissions/grouped"),getById:e=>i().get("/permissions/".concat(e)),create:e=>i().post("/permissions",e),update:(e,t)=>i().put("/permissions/".concat(e),t),delete:e=>i().delete("/permissions/".concat(e)),getByCategory:e=>i().get("/permissions/category/".concat(e)),bulkAssign:(e,t)=>i().post("/permissions/bulk-assign",{roleId:e,permissionIds:t}),bulkRemove:(e,t)=>i().delete("/permissions/bulk-remove",{data:{roleId:e,permissionIds:t}}),getMatrix:()=>i().get("/permissions/matrix"),getStatistics:()=>i().get("/permissions/statistics")},p={getAll:()=>i().get("/departments"),getAllWithStaffCount:()=>i().get("/departments/with-staff-count"),getById:e=>i().get("/departments/".concat(e))},x={getAll:()=>i().get("/branches")}},2189:function(e,t,s){"use strict";s.d(t,{f:function(){return r}});var a=s(9216);let r={assign:async function(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,a.ac)().post("/users/".concat(e,"/department-access"),{departmentId:t,accessLevel:s,isPrimary:r})},revoke:async(e,t)=>(0,a.ac)().delete("/users/".concat(e,"/department-access/").concat(t)),getUserDepartments:async e=>{let t=await (0,a.ac)().get("/users/".concat(e,"/department-access"));return t.data},getDepartmentUsers:async e=>(0,a.ac)().get("/departments/".concat(e,"/user-access")),updateAccessLevel:async(e,t,s)=>(0,a.ac)().put("/users/".concat(e,"/department-access/").concat(t),{accessLevel:s}),setPrimary:async(e,t)=>(0,a.ac)().put("/users/".concat(e,"/department-access/").concat(t),{isPrimary:!0}),bulkAssign:async e=>(0,a.ac)().post("/user-department-access/bulk-assign",{assignments:e}),getAccessMatrix:async e=>{let t=e?{departmentId:e}:{};return(0,a.ac)().get("/user-department-access/matrix",{params:t})}}},3966:function(e,t,s){"use strict";s.d(t,{R:function(){return n},t:function(){return r}});var a=s(9147);let r=(0,a.Ue)((e,t)=>({user:null,token:null,refreshToken:null,tenantId:null,roles:[],permissions:[],isLoading:!1,mustChangePassword:!1,setAuth:(t,s,a,r,n,c,i)=>{e({token:t,refreshToken:s,user:a,roles:r,permissions:n,tenantId:c,mustChangePassword:i}),localStorage.setItem("auth_token",t),localStorage.setItem("refresh_token",s),localStorage.setItem("user",JSON.stringify(a)),localStorage.setItem("roles",JSON.stringify(r)),localStorage.setItem("permissions",JSON.stringify(n)),localStorage.setItem("tenant_id",c)},logout:()=>{e({user:null,token:null,refreshToken:null,tenantId:null,roles:[],permissions:[],mustChangePassword:!1}),localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),localStorage.removeItem("roles"),localStorage.removeItem("permissions"),localStorage.removeItem("tenant_id")},clearMustChangePassword:()=>e({mustChangePassword:!1}),hasPermission:e=>{let{permissions:s}=t();return!!(s&&Array.isArray(s))&&(!!s.includes("*")||s.includes(e))},hasRole:e=>{let{roles:s}=t();return!!(s&&Array.isArray(s))&&s.includes(e)}}));function n(){try{let e=localStorage.getItem("auth_token"),t=localStorage.getItem("refresh_token"),s=localStorage.getItem("user"),a=localStorage.getItem("roles"),n=localStorage.getItem("permissions"),c=localStorage.getItem("tenant_id");if(e&&s){let i=JSON.parse(s),l=a?JSON.parse(a):[],o=n?JSON.parse(n):[];r.getState().setAuth(e,t||null,i,l,o,c||null,r.getState().mustChangePassword)}}catch(e){console.warn("Failed to hydrate auth from storage",e)}}}},function(e){e.O(0,[675,510,662,744],function(){return e(e.s=547)}),_N_E=e.O()}]);