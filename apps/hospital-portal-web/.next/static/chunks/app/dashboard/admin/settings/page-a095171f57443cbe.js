(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[120],{4092:function(e,t,r){Promise.resolve().then(r.bind(r,8587))},8587:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var s=r(5650),a=r(3966),n=r(9856),i=r(2317);function o(){let{user:e}=(0,a.t)();(0,n.useRouter)();let[t,r]=(0,i.useState)("general"),[o,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)(!1),[u,m]=(0,i.useState)(""),[g,x]=(0,i.useState)(""),[p,h]=(0,i.useState)({general:{systemName:"Hospital Portal",timezone:"UTC",language:"en",maintenanceMode:!1},email:{smtpHost:"",smtpPort:587,smtpUsername:"",smtpPassword:"",fromEmail:"",fromName:"",enableTLS:!0},security:{sessionTimeout:30,passwordMinLength:8,passwordRequireUppercase:!0,passwordRequireLowercase:!0,passwordRequireNumbers:!0,passwordRequireSymbols:!0,maxLoginAttempts:5,lockoutDuration:15},hipaa:{auditLogRetention:7,dataEncryption:!0,accessLogging:!0,breachNotification:!0,complianceOfficer:""},backup:{autoBackup:!0,backupFrequency:"daily",backupRetention:30,backupLocation:"",encryptionEnabled:!0},integrations:{apiEnabled:!0,webhookUrl:"",apiRateLimit:1e3,externalAuth:!1,ssoEnabled:!1}});(0,i.useEffect)(()=>{e&&b()},[e]);let b=async()=>{try{l(!0);let e=localStorage.getItem("systemSettings");e&&h(JSON.parse(e))}catch(e){console.error("Error loading settings:",e),m("Failed to load settings")}finally{l(!1)}},f=async()=>{try{d(!0),m(""),x(""),localStorage.setItem("systemSettings",JSON.stringify(p)),x("Settings saved successfully"),setTimeout(()=>x(""),3e3)}catch(r){var e,t;m((null===(t=r.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Failed to save settings")}finally{d(!1)}},y=(e,t,r)=>{h(s=>({...s,[e]:{...s[e],[t]:r}}))};return o||!e?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading settings..."})]})}):(0,s.jsx)("div",{className:"p-8",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"System Settings"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Configure system-wide settings and preferences"})]}),g&&(0,s.jsx)("div",{className:"mb-4 bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg",children:g}),u&&(0,s.jsxs)("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg",children:[u,(0,s.jsx)("button",{onClick:()=>m(""),className:"float-right font-bold",children:"\xd7"})]}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("div",{className:"border-b border-gray-200",children:(0,s.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{id:"general",name:"General",icon:"⚙️"},{id:"email",name:"Email",icon:"\uD83D\uDCE7"},{id:"security",name:"Security",icon:"\uD83D\uDD12"},{id:"hipaa",name:"HIPAA",icon:"\uD83C\uDFE5"},{id:"backup",name:"Backup",icon:"\uD83D\uDCBE"},{id:"integrations",name:"Integrations",icon:"\uD83D\uDD17"}].map(e=>(0,s.jsxs)("button",{onClick:()=>r(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat(t===e.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,s.jsx)("span",{className:"mr-2",children:e.icon}),e.name]},e.id))})})}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:["general"===t&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"General Settings"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"System Name"}),(0,s.jsx)("input",{type:"text",value:p.general.systemName,onChange:e=>y("general","systemName",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timezone"}),(0,s.jsxs)("select",{value:p.general.timezone,onChange:e=>y("general","timezone",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"UTC",children:"UTC"}),(0,s.jsx)("option",{value:"America/New_York",children:"Eastern Time"}),(0,s.jsx)("option",{value:"America/Chicago",children:"Central Time"}),(0,s.jsx)("option",{value:"America/Denver",children:"Mountain Time"}),(0,s.jsx)("option",{value:"America/Los_Angeles",children:"Pacific Time"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Language"}),(0,s.jsxs)("select",{value:p.general.language,onChange:e=>y("general","language",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"en",children:"English"}),(0,s.jsx)("option",{value:"es",children:"Spanish"}),(0,s.jsx)("option",{value:"fr",children:"French"})]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"maintenanceMode",checked:p.general.maintenanceMode,onChange:e=>y("general","maintenanceMode",e.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"maintenanceMode",className:"ml-2 text-sm font-medium text-gray-700",children:"Maintenance Mode"})]})]})]}),"email"===t&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Email Configuration"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Host"}),(0,s.jsx)("input",{type:"text",value:p.email.smtpHost,onChange:e=>y("email","smtpHost",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"smtp.gmail.com"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Port"}),(0,s.jsx)("input",{type:"number",value:p.email.smtpPort,onChange:e=>y("email","smtpPort",parseInt(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Username"}),(0,s.jsx)("input",{type:"text",value:p.email.smtpUsername,onChange:e=>y("email","smtpUsername",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Password"}),(0,s.jsx)("input",{type:"password",value:p.email.smtpPassword,onChange:e=>y("email","smtpPassword",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Email"}),(0,s.jsx)("input",{type:"email",value:p.email.fromEmail,onChange:e=>y("email","fromEmail",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Name"}),(0,s.jsx)("input",{type:"text",value:p.email.fromName,onChange:e=>y("email","fromName",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"enableTLS",checked:p.email.enableTLS,onChange:e=>y("email","enableTLS",e.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"enableTLS",className:"ml-2 text-sm font-medium text-gray-700",children:"Enable TLS"})]})]})]}),"security"===t&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Security Settings"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Timeout (minutes)"}),(0,s.jsx)("input",{type:"number",value:p.security.sessionTimeout,onChange:e=>y("security","sessionTimeout",parseInt(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Password Length"}),(0,s.jsx)("input",{type:"number",value:p.security.passwordMinLength,onChange:e=>y("security","passwordMinLength",parseInt(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Login Attempts"}),(0,s.jsx)("input",{type:"number",value:p.security.maxLoginAttempts,onChange:e=>y("security","maxLoginAttempts",parseInt(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lockout Duration (minutes)"}),(0,s.jsx)("input",{type:"number",value:p.security.lockoutDuration,onChange:e=>y("security","lockoutDuration",parseInt(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"requireUppercase",checked:p.security.passwordRequireUppercase,onChange:e=>y("security","passwordRequireUppercase",e.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"requireUppercase",className:"ml-2 text-sm font-medium text-gray-700",children:"Require Uppercase Letters"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"requireLowercase",checked:p.security.passwordRequireLowercase,onChange:e=>y("security","passwordRequireLowercase",e.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"requireLowercase",className:"ml-2 text-sm font-medium text-gray-700",children:"Require Lowercase Letters"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"requireNumbers",checked:p.security.passwordRequireNumbers,onChange:e=>y("security","passwordRequireNumbers",e.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"requireNumbers",className:"ml-2 text-sm font-medium text-gray-700",children:"Require Numbers"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"requireSymbols",checked:p.security.passwordRequireSymbols,onChange:e=>y("security","passwordRequireSymbols",e.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"requireSymbols",className:"ml-2 text-sm font-medium text-gray-700",children:"Require Symbols"})]})]})]})]}),"hipaa"===t&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"HIPAA Compliance Settings"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Audit Log Retention (years)"}),(0,s.jsx)("input",{type:"number",value:p.hipaa.auditLogRetention,onChange:e=>y("hipaa","auditLogRetention",parseInt(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Compliance Officer"}),(0,s.jsx)("input",{type:"text",value:p.hipaa.complianceOfficer,onChange:e=>y("hipaa","complianceOfficer",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"John Doe"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"dataEncryption",checked:p.hipaa.dataEncryption,onChange:e=>y("hipaa","dataEncryption",e.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"dataEncryption",className:"ml-2 text-sm font-medium text-gray-700",children:"Data Encryption Enabled"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"accessLogging",checked:p.hipaa.accessLogging,onChange:e=>y("hipaa","accessLogging",e.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"accessLogging",className:"ml-2 text-sm font-medium text-gray-700",children:"Access Logging Enabled"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"breachNotification",checked:p.hipaa.breachNotification,onChange:e=>y("hipaa","breachNotification",e.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"breachNotification",className:"ml-2 text-sm font-medium text-gray-700",children:"Breach Notification Enabled"})]})]})]})]}),"backup"===t&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Backup Settings"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Backup Frequency"}),(0,s.jsxs)("select",{value:p.backup.backupFrequency,onChange:e=>y("backup","backupFrequency",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"hourly",children:"Hourly"}),(0,s.jsx)("option",{value:"daily",children:"Daily"}),(0,s.jsx)("option",{value:"weekly",children:"Weekly"}),(0,s.jsx)("option",{value:"monthly",children:"Monthly"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Retention Period (days)"}),(0,s.jsx)("input",{type:"number",value:p.backup.backupRetention,onChange:e=>y("backup","backupRetention",parseInt(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Backup Location"}),(0,s.jsx)("input",{type:"text",value:p.backup.backupLocation,onChange:e=>y("backup","backupLocation",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"/var/backups"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"autoBackup",checked:p.backup.autoBackup,onChange:e=>y("backup","autoBackup",e.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"autoBackup",className:"ml-2 text-sm font-medium text-gray-700",children:"Automatic Backup"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"encryptionEnabled",checked:p.backup.encryptionEnabled,onChange:e=>y("backup","encryptionEnabled",e.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"encryptionEnabled",className:"ml-2 text-sm font-medium text-gray-700",children:"Encryption Enabled"})]})]})]})]}),"integrations"===t&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Integration Settings"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Webhook URL"}),(0,s.jsx)("input",{type:"url",value:p.integrations.webhookUrl,onChange:e=>y("integrations","webhookUrl",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"https://api.example.com/webhook"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Rate Limit (requests/minute)"}),(0,s.jsx)("input",{type:"number",value:p.integrations.apiRateLimit,onChange:e=>y("integrations","apiRateLimit",parseInt(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"apiEnabled",checked:p.integrations.apiEnabled,onChange:e=>y("integrations","apiEnabled",e.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"apiEnabled",className:"ml-2 text-sm font-medium text-gray-700",children:"API Access Enabled"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"externalAuth",checked:p.integrations.externalAuth,onChange:e=>y("integrations","externalAuth",e.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"externalAuth",className:"ml-2 text-sm font-medium text-gray-700",children:"External Authentication"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"ssoEnabled",checked:p.integrations.ssoEnabled,onChange:e=>y("integrations","ssoEnabled",e.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"ssoEnabled",className:"ml-2 text-sm font-medium text-gray-700",children:"SSO Enabled"})]})]})]})]}),(0,s.jsx)("div",{className:"mt-8 flex justify-end",children:(0,s.jsx)("button",{onClick:f,disabled:c,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Saving...":"Save Settings"})})]})]})})}},3966:function(e,t,r){"use strict";r.d(t,{R:function(){return n},t:function(){return a}});var s=r(9147);let a=(0,s.Ue)((e,t)=>({user:null,token:null,refreshToken:null,tenantId:null,roles:[],permissions:[],isLoading:!1,mustChangePassword:!1,setAuth:(t,r,s,a,n,i,o)=>{e({token:t,refreshToken:r,user:s,roles:a,permissions:n,tenantId:i,mustChangePassword:o}),localStorage.setItem("auth_token",t),localStorage.setItem("refresh_token",r),localStorage.setItem("user",JSON.stringify(s)),localStorage.setItem("roles",JSON.stringify(a)),localStorage.setItem("permissions",JSON.stringify(n)),localStorage.setItem("tenant_id",i)},logout:()=>{e({user:null,token:null,refreshToken:null,tenantId:null,roles:[],permissions:[],mustChangePassword:!1}),localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),localStorage.removeItem("roles"),localStorage.removeItem("permissions"),localStorage.removeItem("tenant_id")},clearMustChangePassword:()=>e({mustChangePassword:!1}),hasPermission:e=>{let{permissions:r}=t();return!!(r&&Array.isArray(r))&&(!!r.includes("*")||r.includes(e))},hasRole:e=>{let{roles:r}=t();return!!(r&&Array.isArray(r))&&r.includes(e)}}));function n(){try{let e=localStorage.getItem("auth_token"),t=localStorage.getItem("refresh_token"),r=localStorage.getItem("user"),s=localStorage.getItem("roles"),n=localStorage.getItem("permissions"),i=localStorage.getItem("tenant_id");if(e&&r){let o=JSON.parse(r),l=s?JSON.parse(s):[],c=n?JSON.parse(n):[];a.getState().setAuth(e,t||null,o,l,c,i||null,a.getState().mustChangePassword)}}catch(e){console.warn("Failed to hydrate auth from storage",e)}}},1291:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=r(2317),a=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var s,n={},c=null,d=null;for(s in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,s)&&!l.hasOwnProperty(s)&&(n[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===n[s]&&(n[s]=t[s]);return{$$typeof:a,type:e,key:c,ref:d,props:n,_owner:o.current}}t.Fragment=n,t.jsx=c,t.jsxs=c},5650:function(e,t,r){"use strict";e.exports=r(1291)},9856:function(e,t,r){e.exports=r(39)},512:function(e,t,r){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=r(2317),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=s.useState,i=s.useEffect,o=s.useLayoutEffect,l=s.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!a(e,r)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),s=n({inst:{value:r,getSnapshot:t}}),a=s[0].inst,d=s[1];return o(function(){a.value=r,a.getSnapshot=t,c(a)&&d({inst:a})},[e,r,t]),i(function(){return c(a)&&d({inst:a}),e(function(){c(a)&&d({inst:a})})},[e]),l(r),r};t.useSyncExternalStore=void 0!==s.useSyncExternalStore?s.useSyncExternalStore:d},7324:function(e,t,r){"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=r(2317),a=r(6933),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=a.useSyncExternalStore,o=s.useRef,l=s.useEffect,c=s.useMemo,d=s.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,s,a){var u=o(null);if(null===u.current){var m={hasValue:!1,value:null};u.current=m}else m=u.current;var g=i(e,(u=c(function(){function e(e){if(!l){if(l=!0,i=e,e=s(e),void 0!==a&&m.hasValue){var t=m.value;if(a(t,e))return o=t}return o=e}if(t=o,n(i,e))return t;var r=s(e);return void 0!==a&&a(t,r)?(i=e,t):(i=e,o=r)}var i,o,l=!1,c=void 0===r?null:r;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,r,s,a]))[0],u[1]);return l(function(){m.hasValue=!0,m.value=g},[g]),d(g),g}},6933:function(e,t,r){"use strict";e.exports=r(512)},2058:function(e,t,r){"use strict";e.exports=r(7324)},9147:function(e,t,r){"use strict";r.d(t,{Ue:function(){return m}});let s=e=>{let t;let r=new Set,s=(e,s)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=s?s:"object"!=typeof a||null===a)?a:Object.assign({},t,a),r.forEach(r=>r(t,e))}},a=()=>t,n={setState:s,getState:a,getInitialState:()=>i,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},i=t=e(s,a,n);return n},a=e=>e?s(e):s;var n=r(2317),i=r(2058);let{useDebugValue:o}=n,{useSyncExternalStoreWithSelector:l}=i,c=!1,d=e=>e,u=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?a(e):e,r=(e,r)=>(function(e,t=d,r){r&&!c&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),c=!0);let s=l(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return o(s),s})(t,e,r);return Object.assign(r,t),r},m=e=>e?u(e):u}},function(e){e.O(0,[510,662,744],function(){return e(e.s=4092)}),_N_E=e.O()}]);