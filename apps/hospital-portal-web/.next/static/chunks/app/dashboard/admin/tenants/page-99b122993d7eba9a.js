(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[218],{2925:function(e,t,a){Promise.resolve().then(a.bind(a,8897))},8897:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return i}});var s=a(5650),n=a(3966),r=a(9856),l=a(2317),o=a(9216);function i(){let{user:e}=(0,n.t)();(0,r.useRouter)();let[t,a]=(0,l.useState)([]),[i,c]=(0,l.useState)(!0),[d,u]=(0,l.useState)(""),[g,m]=(0,l.useState)("all"),[p,x]=(0,l.useState)("all"),[h,b]=(0,l.useState)("list"),[f,y]=(0,l.useState)(null),[v,j]=(0,l.useState)(""),[N,w]=(0,l.useState)(""),[C,S]=(0,l.useState)({name:"",tenantCode:"",tenantType:"Hospital",status:"Active",tier:"Standard",region:"North America",maxUsers:50,currency:"USD",language:"English",complianceStatus:"Pending",primaryDomain:"",contactEmail:"",contactPhone:"",address:"",city:"",state:"",country:"United States",zipCode:""});(0,l.useEffect)(()=>{e&&k()},[e]);let k=async()=>{try{c(!0),j(""),console.log("Loading tenants from /api/tenants...");let e=await (0,o.ac)().get("/tenants");console.log("Tenants response:",e.data),a(e.data||[]),e.data&&0!==e.data.length||console.log("No tenants found in database")}catch(s){var e,t;console.error("Error loading tenants:",s),console.error("Error response:",s.response);let a=(null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||s.message||"Failed to load tenants";j("Failed to load tenants: ".concat(a))}finally{c(!1)}},A=async()=>{var e,t,a,s;if(!(null===(e=C.name)||void 0===e?void 0:e.trim())||!(null===(t=C.tenantCode)||void 0===t?void 0:t.trim())){j("Name and Tenant Code are required");return}try{let e={...C,subscriptionEndDate:new Date(Date.now()+31536e6).toISOString(),currentUserCount:0};await (0,o.ac)().post("/tenants",e),w("Tenant created successfully"),b("list"),D(),k(),setTimeout(()=>w(""),3e3)}catch(e){j((null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to create tenant")}},I=e=>{y(e),S(e),b("edit")},P=async()=>{if(null==f?void 0:f.id)try{await (0,o.ac)().put("/tenants/".concat(f.id,"/details"),C),w("Tenant updated successfully"),b("list"),D(),k(),setTimeout(()=>w(""),3e3)}catch(a){var e,t;j((null===(t=a.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Failed to update tenant")}},T=async e=>{if(confirm("Are you sure you want to delete this tenant? This action will soft-delete the tenant."))try{await (0,o.ac)().delete("/tenants/".concat(e)),w("Tenant deleted successfully"),k(),setTimeout(()=>w(""),3e3)}catch(e){var t,a;j((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to delete tenant")}},D=()=>{S({name:"",tenantCode:"",tenantType:"Hospital",status:"Active",tier:"Standard",region:"North America",maxUsers:50,currency:"USD",language:"English",complianceStatus:"Pending",primaryDomain:"",contactEmail:"",contactPhone:"",address:"",city:"",state:"",country:"United States",zipCode:""}),y(null),j("")},E=t.filter(e=>{var t;let a=e.name.toLowerCase().includes(d.toLowerCase())||e.tenantCode.toLowerCase().includes(d.toLowerCase())||(null===(t=e.contactEmail)||void 0===t?void 0:t.toLowerCase().includes(d.toLowerCase())),s="all"===g||e.status===g,n="all"===p||e.tier===p;return a&&s&&n});return i||!e?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):"list"===h?(0,s.jsx)("div",{className:"p-8",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8 flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Tenant Management"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage hospital tenants and subscriptions"})]}),(0,s.jsx)("button",{onClick:()=>{D(),b("create")},className:"bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition",children:"+ Create Tenant"})]}),N&&(0,s.jsx)("div",{className:"mb-4 bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg",children:N}),v&&(0,s.jsxs)("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg",children:[v,(0,s.jsx)("button",{onClick:()=>j(""),className:"float-right font-bold",children:"\xd7"})]}),(0,s.jsxs)("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsx)("input",{type:"text",placeholder:"Search tenants...",value:d,onChange:e=>u(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),(0,s.jsxs)("select",{value:g,onChange:e=>m(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"all",children:"All Status"}),(0,s.jsx)("option",{value:"Active",children:"Active"}),(0,s.jsx)("option",{value:"Inactive",children:"Inactive"}),(0,s.jsx)("option",{value:"Suspended",children:"Suspended"})]}),(0,s.jsxs)("select",{value:p,onChange:e=>x(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"all",children:"All Tiers"}),(0,s.jsx)("option",{value:"Starter",children:"Starter"}),(0,s.jsx)("option",{value:"Standard",children:"Standard"}),(0,s.jsx)("option",{value:"Professional",children:"Professional"}),(0,s.jsx)("option",{value:"Enterprise",children:"Enterprise"})]})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"}),(0,s.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading tenants..."})]}):0===E.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDFDB️"}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No Tenants Found"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:d||"all"!==g||"all"!==p?"Try adjusting your filters":"Create your first tenant to get started"}),!d&&"all"===g&&"all"===p&&(0,s.jsx)("button",{onClick:()=>b("create"),className:"bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700",children:"Create Tenant"})]}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tenant"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tier"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Region"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Users"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subscription"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Compliance"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsxs)("td",{className:"px-6 py-4",children:[(0,s.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.tenantCode})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("Active"===e.status?"bg-green-100 text-green-800":"Suspended"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.status})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("Enterprise"===e.tier?"bg-purple-100 text-purple-800":"Professional"===e.tier?"bg-blue-100 text-blue-800":"Standard"===e.tier?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-800"),children:e.tier})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:e.region}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[e.currentUserCount," / ",e.maxUsers]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:new Date(e.subscriptionEndDate).toLocaleDateString()}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("Compliant"===e.complianceStatus?"bg-green-100 text-green-800":"Non-Compliant"===e.complianceStatus?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.complianceStatus})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[(0,s.jsx)("button",{onClick:()=>I(e),className:"text-indigo-600 hover:text-indigo-900",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>T(e.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},e.id))})]})})})]})}):(0,s.jsx)("div",{className:"p-8",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("button",{onClick:()=>{b("list"),D()},className:"text-indigo-600 hover:text-indigo-800 mb-4 flex items-center",children:"← Back to List"}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"create"===h?"Create New Tenant":"Edit Tenant"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"create"===h?"Add a new hospital tenant to the system":"Update tenant information and settings"})]}),v&&(0,s.jsxs)("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg",children:[v,(0,s.jsx)("button",{onClick:()=>j(""),className:"float-right font-bold",children:"\xd7"})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-md p-8",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tenant Name *"}),(0,s.jsx)("input",{type:"text",value:C.name,onChange:e=>S({...C,name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"e.g., Apollo Eye Hospital"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tenant Code *"}),(0,s.jsx)("input",{type:"text",value:C.tenantCode,onChange:e=>S({...C,tenantCode:e.target.value.toUpperCase()}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"e.g., APOLLO"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tenant Type"}),(0,s.jsxs)("select",{value:C.tenantType,onChange:e=>S({...C,tenantType:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"Hospital",children:"Hospital"}),(0,s.jsx)("option",{value:"Clinic",children:"Clinic"}),(0,s.jsx)("option",{value:"Healthcare System",children:"Healthcare System"}),(0,s.jsx)("option",{value:"Research Center",children:"Research Center"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,s.jsxs)("select",{value:C.status,onChange:e=>S({...C,status:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"Active",children:"Active"}),(0,s.jsx)("option",{value:"Inactive",children:"Inactive"}),(0,s.jsx)("option",{value:"Suspended",children:"Suspended"})]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Subscription Settings"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subscription Tier"}),(0,s.jsxs)("select",{value:C.tier,onChange:e=>S({...C,tier:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"Starter",children:"Starter"}),(0,s.jsx)("option",{value:"Standard",children:"Standard"}),(0,s.jsx)("option",{value:"Professional",children:"Professional"}),(0,s.jsx)("option",{value:"Enterprise",children:"Enterprise"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Users"}),(0,s.jsx)("input",{type:"number",value:C.maxUsers,onChange:e=>S({...C,maxUsers:parseInt(e.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",min:"1"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Regional Configuration"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Region"}),(0,s.jsxs)("select",{value:C.region,onChange:e=>S({...C,region:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"North America",children:"North America"}),(0,s.jsx)("option",{value:"South America",children:"South America"}),(0,s.jsx)("option",{value:"Europe",children:"Europe"}),(0,s.jsx)("option",{value:"Asia",children:"Asia"}),(0,s.jsx)("option",{value:"Africa",children:"Africa"}),(0,s.jsx)("option",{value:"Australia",children:"Australia"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),(0,s.jsxs)("select",{value:C.currency,onChange:e=>S({...C,currency:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"USD",children:"USD - US Dollar"}),(0,s.jsx)("option",{value:"EUR",children:"EUR - Euro"}),(0,s.jsx)("option",{value:"GBP",children:"GBP - British Pound"}),(0,s.jsx)("option",{value:"INR",children:"INR - Indian Rupee"}),(0,s.jsx)("option",{value:"AUD",children:"AUD - Australian Dollar"}),(0,s.jsx)("option",{value:"CAD",children:"CAD - Canadian Dollar"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Language"}),(0,s.jsxs)("select",{value:C.language,onChange:e=>S({...C,language:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"English",children:"English"}),(0,s.jsx)("option",{value:"Spanish",children:"Spanish"}),(0,s.jsx)("option",{value:"French",children:"French"}),(0,s.jsx)("option",{value:"German",children:"German"}),(0,s.jsx)("option",{value:"Hindi",children:"Hindi"}),(0,s.jsx)("option",{value:"Mandarin",children:"Mandarin"})]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Domain"}),(0,s.jsx)("input",{type:"text",value:C.primaryDomain,onChange:e=>S({...C,primaryDomain:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"e.g., apolloeye.com"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Email"}),(0,s.jsx)("input",{type:"email",value:C.contactEmail,onChange:e=>S({...C,contactEmail:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"admin@apolloeye.com"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Phone"}),(0,s.jsx)("input",{type:"tel",value:C.contactPhone,onChange:e=>S({...C,contactPhone:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"+1 (555) 123-4567"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Compliance Status"}),(0,s.jsxs)("select",{value:C.complianceStatus,onChange:e=>S({...C,complianceStatus:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"Compliant",children:"Compliant"}),(0,s.jsx)("option",{value:"Non-Compliant",children:"Non-Compliant"}),(0,s.jsx)("option",{value:"Pending",children:"Pending Review"})]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Address"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address"}),(0,s.jsx)("input",{type:"text",value:C.address,onChange:e=>S({...C,address:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"123 Main Street"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),(0,s.jsx)("input",{type:"text",value:C.city,onChange:e=>S({...C,city:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"New York"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State"}),(0,s.jsx)("input",{type:"text",value:C.state,onChange:e=>S({...C,state:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"NY"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),(0,s.jsx)("input",{type:"text",value:C.country,onChange:e=>S({...C,country:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"United States"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Zip Code"}),(0,s.jsx)("input",{type:"text",value:C.zipCode,onChange:e=>S({...C,zipCode:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"10001"})]})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4 border-t",children:[(0,s.jsx)("button",{onClick:()=>{b("list"),D()},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,s.jsx)("button",{onClick:"create"===h?A:P,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"create"===h?"Create Tenant":"Update Tenant"})]})]})})]})})}},9216:function(e,t,a){"use strict";let s;a.d(t,{Di:function(){return i},J2:function(){return m},WU:function(){return p},ac:function(){return o},g8:function(){return u},h0:function(){return g},h5:function(){return c},iJ:function(){return d},qN:function(){return l},sl:function(){return x}});var n=a(6470),r=a(3966);a(2189);let l=()=>((s=n.Z.create({baseURL:"http://localhost:5073/api",headers:{"Content-Type":"application/json"}})).interceptors.request.use(e=>{let{tenantId:t,token:a}=r.t.getState();return t&&(e.headers["X-Tenant-ID"]=t),a&&(e.headers.Authorization="Bearer ".concat(a)),e}),s.interceptors.response.use(e=>e,e=>{var t,a;return(null===(t=e.response)||void 0===t?void 0:t.status)===401?(r.t.getState().logout(),window.location.href="/auth/login"):(null===(a=e.response)||void 0===a?void 0:a.status)===403&&(window.location.href="/dashboard/unauthorized"),Promise.reject(e)}),s),o=()=>s||l(),i={getAll:()=>o().get("/patients"),getById:e=>o().get("/patients/".concat(e)),create:e=>o().post("/patients",e),update:(e,t)=>o().put("/patients/".concat(e),t),delete:e=>o().delete("/patients/".concat(e))},c={getAll:()=>o().get("/examinations"),getById:e=>o().get("/examinations/".concat(e)),getByPatient:e=>o().get("/examinations/patient/".concat(e)),create:e=>o().post("/examinations",e),update:(e,t)=>o().put("/examinations/".concat(e),t),delete:e=>o().delete("/examinations/".concat(e))},d={login:(e,t,a)=>o().post("/auth/login",{email:e,password:t,tenantId:a}),changePassword:(e,t)=>o().post("/auth/change-password",{currentPassword:e,newPassword:t})},u={getAll:()=>o().get("/users"),getAllWithDetails:()=>o().get("/users/with-details"),getById:e=>o().get("/users/".concat(e)),create:e=>o().post("/users",e),update:(e,t)=>o().put("/users/".concat(e),t),deactivate:e=>o().post("/users/".concat(e,"/deactivate"))},g={getAll:()=>o().get("/roles"),getAllWithUserCount:()=>o().get("/roles/with-user-count"),getById:e=>o().get("/roles/".concat(e)),create:e=>o().post("/roles",e),update:(e,t)=>o().put("/roles/".concat(e),t),delete:e=>o().delete("/roles/".concat(e)),assignRole:(e,t,a)=>o().post("/users/".concat(e,"/roles"),{roleId:t,branchId:a}),getRolePermissions:e=>o().get("/roles/".concat(e,"/permissions")),assignPermissions:(e,t)=>o().post("/roles/".concat(e,"/permissions"),{permissionIds:t}),removePermissions:(e,t)=>o().delete("/roles/".concat(e,"/permissions"),{data:{permissionIds:t}}),cloneRole:(e,t,a)=>o().post("/roles/".concat(e,"/clone"),{name:t,description:a})},m={getAll:()=>o().get("/permissions"),getAllGrouped:()=>o().get("/permissions/grouped"),getById:e=>o().get("/permissions/".concat(e)),create:e=>o().post("/permissions",e),update:(e,t)=>o().put("/permissions/".concat(e),t),delete:e=>o().delete("/permissions/".concat(e)),getByCategory:e=>o().get("/permissions/category/".concat(e)),bulkAssign:(e,t)=>o().post("/permissions/bulk-assign",{roleId:e,permissionIds:t}),bulkRemove:(e,t)=>o().delete("/permissions/bulk-remove",{data:{roleId:e,permissionIds:t}}),getMatrix:()=>o().get("/permissions/matrix"),getStatistics:()=>o().get("/permissions/statistics")},p={getAll:()=>o().get("/departments"),getAllWithStaffCount:()=>o().get("/departments/with-staff-count"),getById:e=>o().get("/departments/".concat(e))},x={getAll:()=>o().get("/branches")}},2189:function(e,t,a){"use strict";a.d(t,{f:function(){return n}});var s=a(9216);let n={assign:async function(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,s.ac)().post("/users/".concat(e,"/department-access"),{departmentId:t,accessLevel:a,isPrimary:n})},revoke:async(e,t)=>(0,s.ac)().delete("/users/".concat(e,"/department-access/").concat(t)),getUserDepartments:async e=>{let t=await (0,s.ac)().get("/users/".concat(e,"/department-access"));return t.data},getDepartmentUsers:async e=>(0,s.ac)().get("/departments/".concat(e,"/user-access")),updateAccessLevel:async(e,t,a)=>(0,s.ac)().put("/users/".concat(e,"/department-access/").concat(t),{accessLevel:a}),setPrimary:async(e,t)=>(0,s.ac)().put("/users/".concat(e,"/department-access/").concat(t),{isPrimary:!0}),bulkAssign:async e=>(0,s.ac)().post("/user-department-access/bulk-assign",{assignments:e}),getAccessMatrix:async e=>{let t=e?{departmentId:e}:{};return(0,s.ac)().get("/user-department-access/matrix",{params:t})}}},3966:function(e,t,a){"use strict";a.d(t,{R:function(){return r},t:function(){return n}});var s=a(9147);let n=(0,s.Ue)((e,t)=>({user:null,token:null,refreshToken:null,tenantId:null,roles:[],permissions:[],isLoading:!1,mustChangePassword:!1,setAuth:(t,a,s,n,r,l,o)=>{e({token:t,refreshToken:a,user:s,roles:n,permissions:r,tenantId:l,mustChangePassword:o}),localStorage.setItem("auth_token",t),localStorage.setItem("refresh_token",a),localStorage.setItem("user",JSON.stringify(s)),localStorage.setItem("roles",JSON.stringify(n)),localStorage.setItem("permissions",JSON.stringify(r)),localStorage.setItem("tenant_id",l)},logout:()=>{e({user:null,token:null,refreshToken:null,tenantId:null,roles:[],permissions:[],mustChangePassword:!1}),localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),localStorage.removeItem("roles"),localStorage.removeItem("permissions"),localStorage.removeItem("tenant_id")},clearMustChangePassword:()=>e({mustChangePassword:!1}),hasPermission:e=>{let{permissions:a}=t();return!!(a&&Array.isArray(a))&&(!!a.includes("*")||a.includes(e))},hasRole:e=>{let{roles:a}=t();return!!(a&&Array.isArray(a))&&a.includes(e)}}));function r(){try{let e=localStorage.getItem("auth_token"),t=localStorage.getItem("refresh_token"),a=localStorage.getItem("user"),s=localStorage.getItem("roles"),r=localStorage.getItem("permissions"),l=localStorage.getItem("tenant_id");if(e&&a){let o=JSON.parse(a),i=s?JSON.parse(s):[],c=r?JSON.parse(r):[];n.getState().setAuth(e,t||null,o,i,c,l||null,n.getState().mustChangePassword)}}catch(e){console.warn("Failed to hydrate auth from storage",e)}}},9856:function(e,t,a){e.exports=a(39)}},function(e){e.O(0,[675,510,662,744],function(){return e(e.s=2925)}),_N_E=e.O()}]);