(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[305],{7845:function(e,t,s){Promise.resolve().then(s.bind(s,3893))},3893:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var r=s(5650),a=s(3966),n=s(8591),l=s(9856),i=s(2317);let o={blue:"bg-blue-50 border-blue-200 text-blue-600",green:"bg-green-50 border-green-200 text-green-600",yellow:"bg-yellow-50 border-yellow-200 text-yellow-600",red:"bg-red-50 border-red-200 text-red-600",purple:"bg-purple-50 border-purple-200 text-purple-600",gray:"bg-gray-50 border-gray-200 text-gray-600"};function c(e){let{title:t,value:s,icon:a,trend:n,subtitle:l,color:i="blue",onClick:c}=e,d=o[i];return(0,r.jsx)("div",{className:"rounded-lg border-2 p-6 transition-all hover:shadow-md ".concat(c?"cursor-pointer":""," ").concat(d),onClick:c,children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t}),(0,r.jsxs)("div",{className:"mt-2 flex items-baseline",children:[(0,r.jsx)("p",{className:"text-3xl font-semibold text-gray-900",children:s}),n&&(0,r.jsxs)("span",{className:"ml-2 text-sm font-medium ".concat(n.isPositive?"text-green-600":"text-red-600"),children:[n.isPositive?"↑":"↓"," ",Math.abs(n.value),"%"]})]}),l&&(0,r.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:l})]}),a&&(0,r.jsx)("div",{className:"text-4xl opacity-50",children:a})]})})}var d=s(5665);function m(){let{user:e}=(0,a.t)(),t=(0,l.useRouter)(),[s,o]=(0,i.useState)(null),[m,g]=(0,i.useState)(null),[u,x]=(0,i.useState)([]),[p,h]=(0,i.useState)([]),[b,y]=(0,i.useState)(!0),[v,f]=(0,i.useState)(null);(0,i.useEffect)(()=>{if(!e){t.push("/");return}w()},[e,t]);let w=async()=>{try{y(!0),f(null);let[e,t,s,r]=await Promise.all([n.k.getOverviewStats(),n.k.getQuickStats(),n.k.getRecentActivities(10),n.k.getAlerts(5)]);o(e),g(t),x(s),h(r)}catch(s){var e,t;console.error("Error loading dashboard:",s),f((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Failed to load dashboard data"),o({totalTenants:5,totalUsers:250,totalDepartments:45,totalBranches:12,activeUsers:89,systemHealthStatus:"healthy",last24HoursActivity:1234}),g({userGrowth:{currentMonth:25,lastMonth:20,percentageChange:25},departmentOperations:{active:42,total:45,utilizationRate:93.3},complianceStatus:{hipaa:"compliant",nabh:"compliant",dpa:"partial",overallScore:85},systemPerformance:{uptime:99.8,responseTime:125,errorRate:.2}}),x([{id:"1",type:"user_registration",description:"New user registered: Dr. Sarah Johnson",user:"System",timestamp:new Date(Date.now()-3e5).toISOString()},{id:"2",type:"role_assignment",description:"Assigned Doctor role to John Smith",user:"Admin User",timestamp:new Date(Date.now()-9e5).toISOString()},{id:"3",type:"admin_action",description:"Updated department settings: Cardiology",user:"Admin User",timestamp:new Date(Date.now()-18e5).toISOString()}]),h([{id:"1",type:"password_expiry",severity:"medium",title:"Password Expiry Warning",description:"15 users have passwords expiring in the next 7 days",timestamp:new Date().toISOString(),actionRequired:!0,affectedUsers:15},{id:"2",type:"compliance_issue",severity:"high",title:"DPA Compliance Issue",description:"Data retention policy needs review",timestamp:new Date().toISOString(),actionRequired:!0}])}finally{y(!1)}},j=async e=>{try{await n.k.dismissAlert(e),h(p.filter(t=>t.id!==e))}catch(e){console.error("Error dismissing alert:",e)}},N=e=>{switch(e){case"user_registration":return"\uD83D\uDC64";case"role_assignment":return"\uD83D\uDD10";case"permission_change":return"⚙️";case"admin_action":return"⚡";default:return"\uD83D\uDCCB"}},S=e=>{switch(e){case"password_expiry":return"\uD83D\uDD11";case"compliance_issue":return"⚠️";case"system_alert":return"\uD83D\uDD14";case"failed_login":return"\uD83D\uDEAB";default:return"\uD83D\uDCE2"}},D=e=>{let t=new Date,s=new Date(e),r=t.getTime()-s.getTime(),a=Math.floor(r/6e4),n=Math.floor(a/60),l=Math.floor(n/24);return a<1?"Just now":a<60?"".concat(a," min").concat(a>1?"s":""," ago"):n<24?"".concat(n," hour").concat(n>1?"s":""," ago"):"".concat(l," day").concat(l>1?"s":""," ago")};return e?b?(0,r.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"mb-4 h-12 w-12 animate-spin rounded-full border-4 border-blue-600 border-t-transparent"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Loading dashboard..."})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,r.jsxs)("div",{className:"mx-auto max-w-7xl",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome back, ",e.firstName,"! \uD83D\uDC4B"]}),(0,r.jsx)("p",{className:"mt-2 text-gray-600",children:"Here's what's happening with your hospital today."})]}),v&&(0,r.jsx)("div",{className:"mb-6 rounded-lg border border-yellow-300 bg-yellow-50 p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"text-2xl",children:"⚠️"}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"Using Demo Data"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-yellow-700",children:v})]})]})}),s&&(0,r.jsxs)("div",{className:"mb-8 grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsx)(c,{title:"Total Tenants",value:s.totalTenants,icon:"\uD83C\uDFE2",color:"blue",onClick:()=>t.push("/dashboard/admin/tenants")}),(0,r.jsx)(c,{title:"Total Users",value:s.totalUsers,icon:"\uD83D\uDC65",color:"green",subtitle:"".concat(s.activeUsers," active now"),onClick:()=>t.push("/dashboard/admin/users")}),(0,r.jsx)(c,{title:"Departments",value:s.totalDepartments,icon:"\uD83C\uDFE5",color:"purple",onClick:()=>t.push("/dashboard/admin/departments")}),(0,r.jsx)(c,{title:"Branches",value:s.totalBranches,icon:"\uD83D\uDCCD",color:"yellow",onClick:()=>t.push("/dashboard/admin/branches")})]}),s&&(0,r.jsxs)("div",{className:"mb-8 grid grid-cols-1 gap-6 lg:grid-cols-2",children:[(0,r.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[(0,r.jsx)("h2",{className:"mb-4 text-lg font-semibold text-gray-900",children:"System Health"}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Current Status"}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)(d.O,{status:s.systemHealthStatus,size:"lg"})})]}),(0,r.jsx)("div",{className:"text-6xl",children:"healthy"===s.systemHealthStatus?"✅":"⚠️"})]})]}),(0,r.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[(0,r.jsx)("h2",{className:"mb-4 text-lg font-semibold text-gray-900",children:"Last 24 Hours"}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Total Activities"}),(0,r.jsx)("p",{className:"mt-2 text-3xl font-semibold text-gray-900",children:s.last24HoursActivity.toLocaleString()})]}),(0,r.jsx)("div",{className:"text-6xl",children:"\uD83D\uDCCA"})]})]})]}),m&&(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h2",{className:"mb-4 text-xl font-semibold text-gray-900",children:"Quick Stats"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"User Growth"}),(0,r.jsxs)("p",{className:"mt-2 text-2xl font-semibold text-gray-900",children:["+",m.userGrowth.currentMonth]}),(0,r.jsxs)("p",{className:"mt-1 text-xs text-green-600",children:["↑ ",m.userGrowth.percentageChange,"% vs last month"]})]}),(0,r.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Department Operations"}),(0,r.jsxs)("p",{className:"mt-2 text-2xl font-semibold text-gray-900",children:[m.departmentOperations.active,"/",m.departmentOperations.total]}),(0,r.jsxs)("p",{className:"mt-1 text-xs text-gray-600",children:[m.departmentOperations.utilizationRate,"% utilization"]})]}),(0,r.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Compliance Score"}),(0,r.jsxs)("p",{className:"mt-2 text-2xl font-semibold text-gray-900",children:[m.complianceStatus.overallScore,"%"]}),(0,r.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,r.jsx)(d.O,{status:m.complianceStatus.hipaa,size:"sm"}),(0,r.jsx)(d.O,{status:m.complianceStatus.nabh,size:"sm"}),(0,r.jsx)(d.O,{status:m.complianceStatus.dpa,size:"sm"})]})]}),(0,r.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"System Performance"}),(0,r.jsxs)("p",{className:"mt-2 text-2xl font-semibold text-gray-900",children:[m.systemPerformance.uptime,"%"]}),(0,r.jsxs)("p",{className:"mt-1 text-xs text-gray-600",children:[m.systemPerformance.responseTime,"ms avg response"]})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[(0,r.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Activities"}),(0,r.jsx)("button",{onClick:()=>t.push("/dashboard/admin/audit-logs"),className:"text-sm text-blue-600 hover:text-blue-700",children:"View All →"})]}),(0,r.jsx)("div",{className:"space-y-4",children:0===u.length?(0,r.jsx)("p",{className:"text-center text-sm text-gray-500",children:"No recent activities"}):u.map(e=>(0,r.jsxs)("div",{className:"flex items-start border-b border-gray-100 pb-4 last:border-0",children:[(0,r.jsx)("div",{className:"text-2xl",children:N(e.type)}),(0,r.jsxs)("div",{className:"ml-3 flex-1",children:[(0,r.jsx)("p",{className:"text-sm text-gray-900",children:e.description}),(0,r.jsxs)("div",{className:"mt-1 flex items-center text-xs text-gray-500",children:[(0,r.jsx)("span",{children:e.user}),(0,r.jsx)("span",{className:"mx-2",children:"•"}),(0,r.jsx)("span",{children:D(e.timestamp)})]})]})]},e.id))})]}),(0,r.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Alerts"}),(0,r.jsxs)("span",{className:"rounded-full bg-red-100 px-2 py-1 text-xs font-medium text-red-800",children:[p.length," Active"]})]}),(0,r.jsx)("div",{className:"space-y-4",children:0===p.length?(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-4xl",children:"✅"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"No active alerts"})]}):p.map(e=>(0,r.jsxs)("div",{className:"rounded-lg border-l-4 p-4 ".concat("critical"===e.severity?"border-red-500 bg-red-50":"high"===e.severity?"border-orange-500 bg-orange-50":"medium"===e.severity?"border-yellow-500 bg-yellow-50":"border-blue-500 bg-blue-50"),children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"text-2xl",children:S(e.type)}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:e.title}),(0,r.jsx)(d.O,{status:e.severity,size:"sm"})]}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-700",children:e.description}),e.affectedUsers&&(0,r.jsxs)("p",{className:"mt-1 text-xs text-gray-600",children:["Affects ",e.affectedUsers," user",e.affectedUsers>1?"s":""]})]})]}),(0,r.jsx)("button",{onClick:()=>j(e.id),className:"text-gray-400 hover:text-gray-600",title:"Dismiss",children:"✕"})]}),e.actionRequired&&(0,r.jsx)("button",{className:"mt-3 w-full rounded bg-white px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Take Action"})]},e.id))})]})]})]})}):null}},5665:function(e,t,s){"use strict";s.d(t,{O:function(){return l}});var r=s(5650);s(2317);let a={Active:"bg-green-100 text-green-800 border-green-200",Inactive:"bg-gray-100 text-gray-800 border-gray-200",Suspended:"bg-red-100 text-red-800 border-red-200","On Leave":"bg-yellow-100 text-yellow-800 border-yellow-200","On-Leave":"bg-yellow-100 text-yellow-800 border-yellow-200",UnderMaintenance:"bg-orange-100 text-orange-800 border-orange-200","Under Maintenance":"bg-orange-100 text-orange-800 border-orange-200",compliant:"bg-green-100 text-green-800 border-green-200",Compliant:"bg-green-100 text-green-800 border-green-200",partial:"bg-yellow-100 text-yellow-800 border-yellow-200",Partial:"bg-yellow-100 text-yellow-800 border-yellow-200","non-compliant":"bg-red-100 text-red-800 border-red-200","Non-Compliant":"bg-red-100 text-red-800 border-red-200",healthy:"bg-green-100 text-green-800 border-green-200",Healthy:"bg-green-100 text-green-800 border-green-200",warning:"bg-yellow-100 text-yellow-800 border-yellow-200",Warning:"bg-yellow-100 text-yellow-800 border-yellow-200",critical:"bg-red-100 text-red-800 border-red-200",Critical:"bg-red-100 text-red-800 border-red-200",low:"bg-blue-100 text-blue-800 border-blue-200",Low:"bg-blue-100 text-blue-800 border-blue-200",medium:"bg-yellow-100 text-yellow-800 border-yellow-200",Medium:"bg-yellow-100 text-yellow-800 border-yellow-200",high:"bg-orange-100 text-orange-800 border-orange-200",High:"bg-orange-100 text-orange-800 border-orange-200",Starter:"bg-gray-100 text-gray-800 border-gray-200",Standard:"bg-blue-100 text-blue-800 border-blue-200",Professional:"bg-purple-100 text-purple-800 border-purple-200",Enterprise:"bg-indigo-100 text-indigo-800 border-indigo-200",Enabled:"bg-green-100 text-green-800 border-green-200",Disabled:"bg-gray-100 text-gray-800 border-gray-200",default:"bg-gray-100 text-gray-800 border-gray-200"},n={sm:"px-2 py-0.5 text-xs",md:"px-3 py-1 text-sm",lg:"px-4 py-1.5 text-base"};function l(e){let{status:t,size:s="md",className:l=""}=e,i=a[t]||a.default,o=n[s];return(0,r.jsx)("span",{className:"inline-flex items-center rounded-full border font-medium ".concat(i," ").concat(o," ").concat(l),children:t})}},9216:function(e,t,s){"use strict";let r;s.d(t,{Di:function(){return o},J2:function(){return u},WU:function(){return x},ac:function(){return i},g8:function(){return m},h0:function(){return g},h5:function(){return c},iJ:function(){return d},qN:function(){return l},sl:function(){return p}});var a=s(6470),n=s(3966);s(2189);let l=()=>((r=a.Z.create({baseURL:"http://localhost:5073/api",headers:{"Content-Type":"application/json"}})).interceptors.request.use(e=>{let{tenantId:t,token:s}=n.t.getState();return t&&(e.headers["X-Tenant-ID"]=t),s&&(e.headers.Authorization="Bearer ".concat(s)),e}),r.interceptors.response.use(e=>e,e=>{var t,s;return(null===(t=e.response)||void 0===t?void 0:t.status)===401?(n.t.getState().logout(),window.location.href="/auth/login"):(null===(s=e.response)||void 0===s?void 0:s.status)===403&&(window.location.href="/dashboard/unauthorized"),Promise.reject(e)}),r),i=()=>r||l(),o={getAll:()=>i().get("/patients"),getById:e=>i().get("/patients/".concat(e)),create:e=>i().post("/patients",e),update:(e,t)=>i().put("/patients/".concat(e),t),delete:e=>i().delete("/patients/".concat(e))},c={getAll:()=>i().get("/examinations"),getById:e=>i().get("/examinations/".concat(e)),getByPatient:e=>i().get("/examinations/patient/".concat(e)),create:e=>i().post("/examinations",e),update:(e,t)=>i().put("/examinations/".concat(e),t),delete:e=>i().delete("/examinations/".concat(e))},d={login:(e,t,s)=>i().post("/auth/login",{email:e,password:t,tenantId:s}),changePassword:(e,t)=>i().post("/auth/change-password",{currentPassword:e,newPassword:t})},m={getAll:()=>i().get("/users"),getAllWithDetails:()=>i().get("/users/with-details"),getById:e=>i().get("/users/".concat(e)),create:e=>i().post("/users",e),update:(e,t)=>i().put("/users/".concat(e),t),deactivate:e=>i().post("/users/".concat(e,"/deactivate"))},g={getAll:()=>i().get("/roles"),getAllWithUserCount:()=>i().get("/roles/with-user-count"),getById:e=>i().get("/roles/".concat(e)),create:e=>i().post("/roles",e),update:(e,t)=>i().put("/roles/".concat(e),t),delete:e=>i().delete("/roles/".concat(e)),assignRole:(e,t,s)=>i().post("/users/".concat(e,"/roles"),{roleId:t,branchId:s}),getRolePermissions:e=>i().get("/roles/".concat(e,"/permissions")),assignPermissions:(e,t)=>i().post("/roles/".concat(e,"/permissions"),{permissionIds:t}),removePermissions:(e,t)=>i().delete("/roles/".concat(e,"/permissions"),{data:{permissionIds:t}}),cloneRole:(e,t,s)=>i().post("/roles/".concat(e,"/clone"),{name:t,description:s})},u={getAll:()=>i().get("/permissions"),getAllGrouped:()=>i().get("/permissions/grouped"),getById:e=>i().get("/permissions/".concat(e)),create:e=>i().post("/permissions",e),update:(e,t)=>i().put("/permissions/".concat(e),t),delete:e=>i().delete("/permissions/".concat(e)),getByCategory:e=>i().get("/permissions/category/".concat(e)),bulkAssign:(e,t)=>i().post("/permissions/bulk-assign",{roleId:e,permissionIds:t}),bulkRemove:(e,t)=>i().delete("/permissions/bulk-remove",{data:{roleId:e,permissionIds:t}}),getMatrix:()=>i().get("/permissions/matrix"),getStatistics:()=>i().get("/permissions/statistics")},x={getAll:()=>i().get("/departments"),getAllWithStaffCount:()=>i().get("/departments/with-staff-count"),getById:e=>i().get("/departments/".concat(e))},p={getAll:()=>i().get("/branches")}},8591:function(e,t,s){"use strict";s.d(t,{k:function(){return a}});var r=s(9216);let a={getOverviewStats:async()=>{let e=await (0,r.ac)().get("/admin/dashboard/overview");return e.data},getQuickStats:async()=>{let e=await (0,r.ac)().get("/admin/dashboard/quick-stats");return e.data},getRecentActivities:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=await (0,r.ac)().get("/admin/dashboard/recent-activities",{params:{limit:e}});return t.data},getAlerts:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=await (0,r.ac)().get("/admin/dashboard/alerts",{params:{limit:e}});return t.data},dismissAlert:async e=>{await (0,r.ac)().delete("/admin/dashboard/alerts/".concat(e))},getStats:async()=>{let e=await (0,r.ac)().get("/admin/dashboard/stats");return e.data}}},2189:function(e,t,s){"use strict";s.d(t,{f:function(){return a}});var r=s(9216);let a={assign:async function(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,r.ac)().post("/users/".concat(e,"/department-access"),{departmentId:t,accessLevel:s,isPrimary:a})},revoke:async(e,t)=>(0,r.ac)().delete("/users/".concat(e,"/department-access/").concat(t)),getUserDepartments:async e=>{let t=await (0,r.ac)().get("/users/".concat(e,"/department-access"));return t.data},getDepartmentUsers:async e=>(0,r.ac)().get("/departments/".concat(e,"/user-access")),updateAccessLevel:async(e,t,s)=>(0,r.ac)().put("/users/".concat(e,"/department-access/").concat(t),{accessLevel:s}),setPrimary:async(e,t)=>(0,r.ac)().put("/users/".concat(e,"/department-access/").concat(t),{isPrimary:!0}),bulkAssign:async e=>(0,r.ac)().post("/user-department-access/bulk-assign",{assignments:e}),getAccessMatrix:async e=>{let t=e?{departmentId:e}:{};return(0,r.ac)().get("/user-department-access/matrix",{params:t})}}},3966:function(e,t,s){"use strict";s.d(t,{R:function(){return n},t:function(){return a}});var r=s(9147);let a=(0,r.Ue)((e,t)=>({user:null,token:null,refreshToken:null,tenantId:null,roles:[],permissions:[],isLoading:!1,mustChangePassword:!1,setAuth:(t,s,r,a,n,l,i)=>{e({token:t,refreshToken:s,user:r,roles:a,permissions:n,tenantId:l,mustChangePassword:i}),localStorage.setItem("auth_token",t),localStorage.setItem("refresh_token",s),localStorage.setItem("user",JSON.stringify(r)),localStorage.setItem("roles",JSON.stringify(a)),localStorage.setItem("permissions",JSON.stringify(n)),localStorage.setItem("tenant_id",l)},logout:()=>{e({user:null,token:null,refreshToken:null,tenantId:null,roles:[],permissions:[],mustChangePassword:!1}),localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),localStorage.removeItem("roles"),localStorage.removeItem("permissions"),localStorage.removeItem("tenant_id")},clearMustChangePassword:()=>e({mustChangePassword:!1}),hasPermission:e=>{let{permissions:s}=t();return!!(s&&Array.isArray(s))&&(!!s.includes("*")||s.includes(e))},hasRole:e=>{let{roles:s}=t();return!!(s&&Array.isArray(s))&&s.includes(e)}}));function n(){try{let e=localStorage.getItem("auth_token"),t=localStorage.getItem("refresh_token"),s=localStorage.getItem("user"),r=localStorage.getItem("roles"),n=localStorage.getItem("permissions"),l=localStorage.getItem("tenant_id");if(e&&s){let i=JSON.parse(s),o=r?JSON.parse(r):[],c=n?JSON.parse(n):[];a.getState().setAuth(e,t||null,i,o,c,l||null,a.getState().mustChangePassword)}}catch(e){console.warn("Failed to hydrate auth from storage",e)}}},9856:function(e,t,s){e.exports=s(39)}},function(e){e.O(0,[675,510,662,744],function(){return e(e.s=7845)}),_N_E=e.O()}]);